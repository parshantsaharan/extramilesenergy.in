<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - Extra Miles Energy</title>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        /* ===== VARIABLES ===== */
        :root {
            --primary: #0b1220;
            --secondary: #142044;
            --accent: #35d0ff;
            --accent2: #7c5cff;
            --success: #45ff90;
            --warning: #ffb145;
            --danger: #ff3570;
            --text: #ffffff;
            --text-muted: #a0b3d9;
            --border: rgba(255, 255, 255, 0.15);
            --card-bg: rgba(20, 32, 68, 0.9);
            --header-bg: rgba(11, 18, 32, 0.95);
            --overlay: rgba(11, 18, 32, 0.95);
            
            --shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
            --shadow-light: 0 5px 15px rgba(0, 0, 0, 0.2);
            --radius: 16px;
            --radius-sm: 8px;
            --transition: all 0.3s ease;
        }
        
        /* ===== RESET & BASE ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        html {
            scroll-behavior: smooth;
        }
        
        body {
            font-family: 'Inter', system-ui, -apple-system, sans-serif;
            background: var(--primary);
            color: var(--text);
            line-height: 1.6;
            min-height: 100vh;
            background: linear-gradient(135deg, #0b1220 0%, #142044 100%);
        }
        
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 30%, rgba(124, 92, 255, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(53, 208, 255, 0.08) 0%, transparent 50%);
            z-index: -1;
            pointer-events: none;
        }
        
        h1, h2, h3, h4, h5, h6 {
            font-weight: 600;
            line-height: 1.2;
            margin-bottom: 1rem;
        }
        
        a {
            color: inherit;
            text-decoration: none;
            transition: var(--transition);
        }
        
        img {
            max-width: 100%;
            height: auto;
            display: block;
        }
        
        .container {
            width: 100%;
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        /* ===== BUTTONS ===== */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            padding: 12px 24px;
            border-radius: var(--radius-sm);
            font-weight: 600;
            font-size: 0.95rem;
            border: none;
            cursor: pointer;
            transition: var(--transition);
            text-align: center;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--accent), var(--accent2));
            color: white;
            box-shadow: var(--shadow-light);
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(53, 208, 255, 0.3);
        }
        
        .btn-success {
            background: linear-gradient(135deg, var(--success), #2bc47d);
            color: white;
        }
        
        .btn-warning {
            background: linear-gradient(135deg, var(--warning), #ff8c00);
            color: white;
        }
        
        .btn-danger {
            background: linear-gradient(135deg, var(--danger), #ff2b5e);
            color: white;
        }
        
        .btn-outline {
            background: transparent;
            color: var(--text);
            border: 2px solid var(--border);
        }
        
        .btn-outline:hover {
            border-color: var(--accent);
            background: rgba(53, 208, 255, 0.1);
        }
        
        .btn-small {
            padding: 8px 16px;
            font-size: 0.85rem;
        }
        
        .btn-large {
            padding: 16px 32px;
            font-size: 1.1rem;
        }
        
        /* ===== LOGIN PAGE ===== */
        .login-container {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            background: linear-gradient(135deg, rgba(11, 18, 32, 0.9), rgba(20, 32, 68, 0.9));
        }
        
        .login-box {
            background: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 50px;
            width: 100%;
            max-width: 450px;
            box-shadow: var(--shadow);
            text-align: center;
            backdrop-filter: blur(10px);
        }
        
        .login-logo {
            width: 180px;
            margin: 0 auto 30px;
            border-radius: var(--radius-sm);
            border: 1px solid var(--border);
            padding: 10px;
            background: rgba(255, 255, 255, 0.05);
        }
        
        .login-title {
            font-size: 2rem;
            margin-bottom: 10px;
            background: linear-gradient(135deg, var(--accent), var(--accent2));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .login-subtitle {
            color: var(--text-muted);
            margin-bottom: 40px;
            font-size: 1rem;
        }
        
        .form-group {
            margin-bottom: 25px;
            text-align: left;
        }
        
        .form-label {
            display: block;
            margin-bottom: 8px;
            color: var(--text-muted);
            font-weight: 500;
            font-size: 0.95rem;
        }
        
        .form-input {
            width: 100%;
            padding: 14px 16px;
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid var(--border);
            border-radius: var(--radius-sm);
            color: var(--text);
            font-size: 1rem;
            transition: var(--transition);
        }
        
        .form-input:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(53, 208, 255, 0.1);
        }
        
        .message {
            padding: 12px 20px;
            border-radius: var(--radius-sm);
            margin-bottom: 20px;
            text-align: left;
            display: none;
            animation: slideIn 0.3s ease;
        }
        
        .message.error {
            background: rgba(255, 53, 112, 0.1);
            border: 1px solid rgba(255, 53, 112, 0.3);
            color: var(--danger);
        }
        
        .message.success {
            background: rgba(69, 255, 144, 0.1);
            border: 1px solid rgba(69, 255, 144, 0.3);
            color: var(--success);
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* ===== ADMIN DASHBOARD ===== */
        .admin-container {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        /* Header */
        .admin-header {
            background: var(--header-bg);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--border);
            padding: 15px 0;
            position: sticky;
            top: 0;
            z-index: 1000;
        }
        
        .header-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .admin-logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .admin-logo-img {
            width: 50px;
            height: 50px;
            border-radius: var(--radius-sm);
            border: 1px solid var(--border);
            padding: 3px;
            background: rgba(255, 255, 255, 0.05);
        }
        
        .admin-logo-text h2 {
            font-size: 1.3rem;
            margin: 0;
        }
        
        .admin-logo-text .subtitle {
            font-size: 0.85rem;
            color: var(--text-muted);
            margin-top: 2px;
        }
        
        .admin-actions {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .user-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--accent), var(--accent2));
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            color: white;
        }
        
        /* Main Content */
        .admin-main {
            flex: 1;
            padding: 30px 0;
            background: rgba(11, 18, 32, 0.5);
        }
        
        /* Sidebar */
        .admin-sidebar {
            width: 280px;
            background: var(--card-bg);
            border-right: 1px solid var(--border);
            height: calc(100vh - 80px);
            position: fixed;
            left: 0;
            top: 80px;
            overflow-y: auto;
            transition: var(--transition);
        }
        
        .sidebar-menu {
            padding: 20px 0;
        }
        
        .menu-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 15px 25px;
            color: var(--text-muted);
            cursor: pointer;
            transition: var(--transition);
            border-left: 3px solid transparent;
        }
        
        .menu-item:hover {
            background: rgba(53, 208, 255, 0.1);
            color: var(--accent);
            border-left-color: var(--accent);
        }
        
        .menu-item.active {
            background: rgba(53, 208, 255, 0.15);
            color: var(--accent);
            border-left-color: var(--accent);
        }
        
        .menu-icon {
            width: 20px;
            text-align: center;
            font-size: 1.1rem;
        }
        
        .menu-text {
            font-weight: 500;
        }
        
        /* Dashboard Content */
        .dashboard-content {
            margin-left: 280px;
            padding: 20px;
            transition: var(--transition);
        }
        
        .dashboard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 20px;
        }
        
        .dashboard-title {
            font-size: 2rem;
            margin: 0;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }
        
        .stat-card {
            background: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 25px;
            transition: var(--transition);
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
            border-color: var(--accent);
            box-shadow: var(--shadow);
        }
        
        .stat-icon {
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(53, 208, 255, 0.1);
            border-radius: 50%;
            margin-bottom: 15px;
            font-size: 1.5rem;
            color: var(--accent);
        }
        
        .stat-value {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--accent);
            margin-bottom: 5px;
        }
        
        .stat-label {
            color: var(--text-muted);
            font-size: 0.95rem;
        }
        
        /* Tabs */
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
            border-bottom: 1px solid var(--border);
            padding-bottom: 10px;
        }
        
        .tab-btn {
            padding: 12px 25px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid transparent;
            border-radius: var(--radius-sm);
            color: var(--text-muted);
            cursor: pointer;
            transition: var(--transition);
            font-weight: 600;
            font-size: 0.95rem;
        }
        
        .tab-btn:hover {
            background: rgba(53, 208, 255, 0.1);
            color: var(--accent);
        }
        
        .tab-btn.active {
            background: linear-gradient(135deg, var(--accent), var(--accent2));
            color: white;
            border-color: var(--accent);
        }
        
        .tab-content {
            display: none;
            animation: fadeIn 0.3s ease;
        }
        
        .tab-content.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        /* Forms */
        .form-container {
            background: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 30px;
            margin-bottom: 30px;
        }
        
        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .form-full {
            grid-column: 1 / -1;
        }
        
        /* File Upload */
        .file-upload {
            border: 2px dashed var(--border);
            border-radius: var(--radius);
            padding: 40px;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            background: rgba(255, 255, 255, 0.03);
        }
        
        .file-upload:hover {
            border-color: var(--accent);
            background: rgba(53, 208, 255, 0.05);
        }
        
        .file-upload-icon {
            font-size: 3rem;
            color: var(--accent);
            margin-bottom: 15px;
        }
        
        .file-upload-text {
            color: var(--text-muted);
            margin-bottom: 10px;
        }
        
        .file-upload-hint {
            font-size: 0.85rem;
            color: var(--text-muted);
            opacity: 0.7;
        }
        
        .file-input {
            display: none;
        }
        
        .image-preview {
            margin-top: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
        }
        
        .preview-image {
            max-width: 200px;
            max-height: 200px;
            border-radius: var(--radius-sm);
            border: 1px solid var(--border);
            box-shadow: var(--shadow-light);
        }
        
        .preview-info {
            color: var(--text-muted);
            font-size: 0.9rem;
            text-align: center;
        }
        
        /* Products Grid */
        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 25px;
        }
        
        .product-admin-card {
            background: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 20px;
            transition: var(--transition);
            position: relative;
        }
        
        .product-admin-card:hover {
            transform: translateY(-5px);
            border-color: var(--accent);
            box-shadow: var(--shadow);
        }
        
        .product-status {
            position: absolute;
            top: 15px;
            right: 15px;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
        }
        
        .status-active {
            background: rgba(69, 255, 144, 0.1);
            color: var(--success);
            border: 1px solid rgba(69, 255, 144, 0.3);
        }
        
        .status-draft {
            background: rgba(255, 177, 69, 0.1);
            color: var(--warning);
            border: 1px solid rgba(255, 177, 69, 0.3);
        }
        
        .product-admin-image {
            width: 100%;
            height: 180px;
            object-fit: contain;
            border-radius: var(--radius-sm);
            background: rgba(0, 0, 0, 0.2);
            margin-bottom: 15px;
            padding: 10px;
            border: 1px solid var(--border);
        }
        
        .product-admin-title {
            font-size: 1.2rem;
            margin-bottom: 10px;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        
        .product-admin-specs {
            color: var(--accent);
            font-size: 0.9rem;
            margin-bottom: 10px;
        }
        
        .product-admin-category {
            display: inline-block;
            padding: 4px 10px;
            background: rgba(53, 208, 255, 0.1);
            color: var(--accent);
            border-radius: 20px;
            font-size: 0.8rem;
            margin-bottom: 15px;
            border: 1px solid rgba(53, 208, 255, 0.3);
        }
        
        .product-admin-features {
            list-style: none;
            margin-bottom: 15px;
            max-height: 100px;
            overflow-y: auto;
        }
        
        .product-admin-features li {
            padding: 5px 0;
            padding-left: 20px;
            position: relative;
            color: var(--text-muted);
            font-size: 0.9rem;
        }
        
        .product-admin-features li::before {
            content: '•';
            position: absolute;
            left: 0;
            color: var(--accent);
        }
        
        .product-admin-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        
        .product-admin-actions .btn {
            flex: 1;
        }
        
        /* Table */
        .data-table {
            width: 100%;
            border-collapse: collapse;
            background: var(--card-bg);
            border-radius: var(--radius);
            overflow: hidden;
            border: 1px solid var(--border);
        }
        
        .data-table th {
            background: rgba(53, 208, 255, 0.1);
            color: var(--accent);
            font-weight: 600;
            text-align: left;
            padding: 15px;
            border-bottom: 1px solid var(--border);
        }
        
        .data-table td {
            padding: 15px;
            border-bottom: 1px solid var(--border);
            color: var(--text-muted);
        }
        
        .data-table tr:hover {
            background: rgba(255, 255, 255, 0.03);
        }
        
        .table-actions {
            display: flex;
            gap: 8px;
        }
        
        /* Loading */
        .loading {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 50px;
            color: var(--text-muted);
        }
        
        .spinner {
            border: 3px solid rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            border-top: 3px solid var(--accent);
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Notification */
        .notification {
            position: fixed;
            top: 100px;
            right: 20px;
            padding: 15px 25px;
            border-radius: var(--radius);
            background: var(--card-bg);
            border: 1px solid var(--border);
            box-shadow: var(--shadow);
            transform: translateX(150%);
            transition: transform 0.3s ease;
            z-index: 2000;
            max-width: 400px;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .notification.success {
            border-left: 4px solid var(--success);
        }
        
        .notification.error {
            border-left: 4px solid var(--danger);
        }
        
        .notification.info {
            border-left: 4px solid var(--accent);
        }
        
        .notification-icon {
            font-size: 1.2rem;
        }
        
        .notification-content {
            flex: 1;
        }
        
        .notification-title {
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .notification-message {
            font-size: 0.9rem;
            color: var(--text-muted);
        }
        
        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--overlay);
            backdrop-filter: blur(5px);
            z-index: 3000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .modal.active {
            display: flex;
        }
        
        .modal-content {
            background: var(--card-bg);
            border-radius: var(--radius);
            padding: 30px;
            width: 100%;
            max-width: 500px;
            border: 1px solid var(--border);
            box-shadow: var(--shadow);
            position: relative;
            animation: modalSlideIn 0.3s ease;
        }
        
        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .modal-title {
            font-size: 1.5rem;
            margin: 0;
        }
        
        .modal-close {
            background: none;
            border: none;
            color: var(--text-muted);
            font-size: 1.5rem;
            cursor: pointer;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: var(--transition);
        }
        
        .modal-close:hover {
            background: rgba(255, 255, 255, 0.1);
            color: var(--text);
        }
        
        .modal-body {
            margin-bottom: 25px;
        }
        
        .modal-footer {
            display: flex;
            justify-content: flex-end;
            gap: 15px;
        }
        
        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: var(--text-muted);
        }
        
        .empty-state-icon {
            font-size: 4rem;
            color: var(--accent);
            margin-bottom: 20px;
            opacity: 0.5;
        }
        
        .empty-state-title {
            font-size: 1.5rem;
            margin-bottom: 10px;
            color: var(--text);
        }
        
        .empty-state-description {
            max-width: 400px;
            margin: 0 auto 30px;
        }
        
        /* Responsive */
        @media (max-width: 1024px) {
            .admin-sidebar {
                transform: translateX(-100%);
                z-index: 1001;
            }
            
            .admin-sidebar.active {
                transform: translateX(0);
            }
            
            .dashboard-content {
                margin-left: 0;
            }
            
            .sidebar-toggle {
                display: block;
            }
        }
        
        @media (max-width: 768px) {
            .login-box {
                padding: 30px 20px;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .products-grid {
                grid-template-columns: 1fr;
            }
            
            .admin-actions {
                flex-direction: column;
                gap: 10px;
            }
            
            .dashboard-header {
                flex-direction: column;
                align-items: flex-start;
            }
        }
        
        @media (max-width: 480px) {
            .container {
                padding: 0 15px;
            }
            
            .modal-content {
                padding: 20px;
            }
            
            .modal-footer {
                flex-direction: column;
            }
            
            .modal-footer .btn {
                width: 100%;
            }
        }
        
        /* Sidebar Toggle Button */
        .sidebar-toggle {
            display: none;
            background: none;
            border: none;
            color: var(--text);
            font-size: 1.5rem;
            cursor: pointer;
        }
        
        /* Dark Mode Toggle */
        .theme-toggle {
            background: none;
            border: none;
            color: var(--text-muted);
            font-size: 1.2rem;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .theme-toggle:hover {
            color: var(--accent);
        }
    </style>
</head>
<body>
    <!-- Login Page -->
    <div id="loginPage" class="login-container">
        <div class="login-box">
            <img src="../logo.png" alt="Extra Miles Energy" class="login-logo">
            <h1 class="login-title">Admin Panel</h1>
            <p class="login-subtitle">Manage products and website content</p>
            
            <div id="loginMessage" class="message"></div>
            
            <div class="form-group">
                <label for="password" class="form-label">
                    <i class="fas fa-lock"></i> Password
                </label>
                <input type="password" 
                       id="password" 
                       class="form-input" 
                       placeholder="Enter admin password"
                       autocomplete="current-password"
                       onkeypress="if(event.key === 'Enter') login()">
            </div>
            
            <button class="btn btn-primary btn-large" onclick="login()" style="width: 100%;">
                <i class="fas fa-sign-in-alt"></i> Login
            </button>
            
            <div style="margin-top: 30px; padding-top: 20px; border-top: 1px solid var(--border);">
                <p style="color: var(--text-muted); font-size: 0.9rem;">
                    <i class="fas fa-info-circle"></i> Contact support if you forgot password
                </p>
            </div>
        </div>
    </div>
    
    <!-- Admin Dashboard -->
    <div id="adminDashboard" class="admin-container" style="display: none;">
        <!-- Header -->
        <header class="admin-header">
            <div class="container">
                <div class="header-content">
                    <div class="admin-logo">
                        <button class="sidebar-toggle" onclick="toggleSidebar()">
                            <i class="fas fa-bars"></i>
                        </button>
                        <img src="../logo.png" alt="Logo" class="admin-logo-img">
                        <div class="admin-logo-text">
                            <h2>Extra Miles Energy</h2>
                            <div class="subtitle">Admin Dashboard</div>
                        </div>
                    </div>
                    
                    <div class="admin-actions">
                        <div class="user-info">
                            <div class="user-avatar">
                                <i class="fas fa-user"></i>
                            </div>
                            <div>
                                <div style="font-weight: 600;">Admin</div>
                                <div style="font-size: 0.85rem; color: var(--text-muted);">Online</div>
                            </div>
                        </div>
                        
                        <button class="btn btn-outline btn-small" onclick="logout()">
                            <i class="fas fa-sign-out-alt"></i> Logout
                        </button>
                    </div>
                </div>
            </div>
        </header>
        
        <!-- Sidebar -->
        <aside class="admin-sidebar" id="sidebar">
            <div class="sidebar-menu">
                <div class="menu-item active" onclick="showTab('dashboard')">
                    <div class="menu-icon">
                        <i class="fas fa-tachometer-alt"></i>
                    </div>
                    <div class="menu-text">Dashboard</div>
                </div>
                
                <div class="menu-item" onclick="showTab('products')">
                    <div class="menu-icon">
                        <i class="fas fa-box"></i>
                    </div>
                    <div class="menu-text">Products</div>
                </div>
                
                <div class="menu-item" onclick="showTab('addProduct')">
                    <div class="menu-icon">
                        <i class="fas fa-plus-circle"></i>
                    </div>
                    <div class="menu-text">Add Product</div>
                </div>
                
                <div class="menu-item" onclick="showTab('images')">
                    <div class="menu-icon">
                        <i class="fas fa-images"></i>
                    </div>
                    <div class="menu-text">Image Gallery</div>
                </div>
                
                <div class="menu-item" onclick="showTab('orders')">
                    <div class="menu-icon">
                        <i class="fas fa-shopping-cart"></i>
                    </div>
                    <div class="menu-text">Orders</div>
                </div>
                
                <div class="menu-item" onclick="showTab('settings')">
                    <div class="menu-icon">
                        <i class="fas fa-cog"></i>
                    </div>
                    <div class="menu-text">Settings</div>
                </div>
                
                <div style="padding: 25px; margin-top: 20px; border-top: 1px solid var(--border);">
                    <div style="color: var(--text-muted); font-size: 0.9rem; margin-bottom: 10px;">
                        Quick Links
                    </div>
                    <a href="../" target="_blank" class="btn btn-outline btn-small" style="width: 100%; margin-bottom: 10px;">
                        <i class="fas fa-external-link-alt"></i> View Website
                    </a>
                    <a href="https://github.com/parshantsahara/extramilesenergy.in" target="_blank" class="btn btn-outline btn-small" style="width: 100%;">
                        <i class="fab fa-github"></i> GitHub Repo
                    </a>
                </div>
            </div>
        </aside>
        
        <!-- Main Content -->
        <main class="admin-main">
            <div class="dashboard-content" id="dashboardContent">
                <!-- Dashboard Tab -->
                <div id="dashboard" class="tab-content active">
                    <div class="dashboard-header">
                        <h1 class="dashboard-title">Dashboard</h1>
                        <div>
                            <button class="btn btn-primary" onclick="syncWithGitHub()">
                                <i class="fas fa-sync-alt"></i> Sync with GitHub
                            </button>
                        </div>
                    </div>
                    
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-box"></i>
                            </div>
                            <div class="stat-value" id="totalProducts">0</div>
                            <div class="stat-label">Total Products</div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-image"></i>
                            </div>
                            <div class="stat-value" id="totalImages">0</div>
                            <div class="stat-label">Images Uploaded</div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-eye"></i>
                            </div>
                            <div class="stat-value" id="websiteViews">0</div>
                            <div class="stat-label">Website Views</div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fab fa-whatsapp"></i>
                            </div>
                            <div class="stat-value" id="whatsappClicks">0</div>
                            <div class="stat-label">WhatsApp Clicks</div>
                        </div>
                    </div>
                    
                    <div class="form-container">
                        <h3 style="margin-top: 0;">Quick Actions</h3>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                            <button class="btn btn-primary" onclick="showTab('addProduct')">
                                <i class="fas fa-plus"></i> Add New Product
                            </button>
                            <button class="btn btn-success" onclick="exportProducts()">
                                <i class="fas fa-download"></i> Export Products
                            </button>
                            <button class="btn btn-warning" onclick="clearCache()">
                                <i class="fas fa-trash"></i> Clear Cache
                            </button>
                            <button class="btn btn-outline" onclick="openWebsite()">
                                <i class="fas fa-external-link-alt"></i> Open Website
                            </button>
                        </div>
                    </div>
                    
                    <div class="form-container">
                        <h3 style="margin-top: 0;">Recent Activity</h3>
                        <div id="recentActivity" class="loading">
                            <div class="spinner"></div>
                            <div>Loading activity...</div>
                        </div>
                    </div>
                </div>
                
                <!-- Products Tab -->
                <div id="products" class="tab-content">
                    <div class="dashboard-header">
                        <h1 class="dashboard-title">Manage Products</h1>
                        <div>
                            <button class="btn btn-primary" onclick="showTab('addProduct')">
                                <i class="fas fa-plus"></i> Add New
                            </button>
                        </div>
                    </div>
                    
                    <div class="tabs">
                        <button class="tab-btn active" onclick="filterProducts('all')">All Products</button>
                        <button class="tab-btn" onclick="filterProducts('active')">Active</button>
                        <button class="tab-btn" onclick="filterProducts('draft')">Draft</button>
                        <button class="tab-btn" onclick="filterProducts('ev')">EV Batteries</button>
                        <button class="tab-btn" onclick="filterProducts('solar')">Solar Batteries</button>
                    </div>
                    
                    <div id="productsList" class="loading">
                        <div class="spinner"></div>
                        <div>Loading products...</div>
                    </div>
                </div>
                
                <!-- Add Product Tab -->
                <div id="addProduct" class="tab-content">
                    <div class="dashboard-header">
                        <h1 class="dashboard-title">Add New Product</h1>
                        <div>
                            <button class="btn btn-outline" onclick="showTab('products')">
                                <i class="fas fa-arrow-left"></i> Back to Products
                            </button>
                        </div>
                    </div>
                    
                    <div class="form-container">
                        <div id="addProductMessage" class="message"></div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="productName" class="form-label">
                                    <i class="fas fa-tag"></i> Product Name *
                                </label>
                                <input type="text" 
                                       id="productName" 
                                       class="form-input" 
                                       placeholder="e.g., 60V 30Ah Lithium Battery">
                            </div>
                            
                            <div class="form-group">
                                <label for="productVoltage" class="form-label">
                                    <i class="fas fa-bolt"></i> Voltage & Capacity *
                                </label>
                                <input type="text" 
                                       id="productVoltage" 
                                       class="form-input" 
                                       placeholder="e.g., 60V 30Ah (19S2P)">
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="productCategory" class="form-label">
                                    <i class="fas fa-layer-group"></i> Category *
                                </label>
                                <select id="productCategory" class="form-input">
                                    <option value="EV Battery">EV Battery</option>
                                    <option value="Solar Battery">Solar Battery</option>
                                    <option value="Custom Battery">Custom Battery</option>
                                    <option value="E-Rickshaw Battery">E-Rickshaw Battery</option>
                                    <option value="Scooter Battery">Scooter Battery</option>
                                    <option value="Inverter Battery">Inverter Battery</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="productPrice" class="form-label">
                                    <i class="fas fa-rupee-sign"></i> Price Range
                                </label>
                                <input type="text" 
                                       id="productPrice" 
                                       class="form-input" 
                                       placeholder="e.g., ₹18,000 - ₹22,000">
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="productRange" class="form-label">
                                    <i class="fas fa-road"></i> Range (km)
                                </label>
                                <input type="text" 
                                       id="productRange" 
                                       class="form-input" 
                                       placeholder="e.g., 60-80 km">
                            </div>
                            
                            <div class="form-group">
                                <label for="productStatus" class="form-label">
                                    <i class="fas fa-toggle-on"></i> Status
                                </label>
                                <select id="productStatus" class="form-input">
                                    <option value="active">Active</option>
                                    <option value="draft">Draft</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="productFeatures" class="form-label">
                                <i class="fas fa-list-check"></i> Features (One per line) *
                            </label>
                            <textarea id="productFeatures" 
                                      class="form-input" 
                                      rows="4" 
                                      placeholder="LiFePO4 Cells&#10;3 Year Warranty&#10;JK Smart BMS&#10;Suitable for Electric Scooters"></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label for="productDescription" class="form-label">
                                <i class="fas fa-align-left"></i> Description (Optional)
                            </label>
                            <textarea id="productDescription" 
                                      class="form-input" 
                                      rows="3" 
                                      placeholder="Detailed product description..."></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-image"></i> Product Image *
                            </label>
                            <div class="file-upload" onclick="document.getElementById('productImage').click()">
                                <div class="file-upload-icon">
                                    <i class="fas fa-cloud-upload-alt"></i>
                                </div>
                                <div class="file-upload-text">
                                    Click to upload product image
                                </div>
                                <div class="file-upload-hint">
                                    Recommended: 500x600px, PNG or JPG, Max 2MB
                                </div>
                                <input type="file" 
                                       id="productImage" 
                                       class="file-input" 
                                       accept="image/*"
                                       onchange="previewImage(event)">
                            </div>
                            <div class="image-preview" id="imagePreview">
                                <!-- Preview will appear here -->
                            </div>
                        </div>
                        
                        <div style="display: flex; gap: 15px; margin-top: 30px;">
                            <button class="btn btn-primary btn-large" onclick="saveProduct()">
                                <i class="fas fa-save"></i> Save Product
                            </button>
                            <button class="btn btn-outline btn-large" onclick="clearForm()">
                                <i class="fas fa-times"></i> Clear Form
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Images Tab -->
                <div id="images" class="tab-content">
                    <div class="dashboard-header">
                        <h1 class="dashboard-title">Image Gallery</h1>
                        <div>
                            <button class="btn btn-primary" onclick="uploadNewImage()">
                                <i class="fas fa-upload"></i> Upload Image
                            </button>
                        </div>
                    </div>
                    
                    <div class="form-container">
                        <div id="imageGallery" class="loading">
                            <div class="spinner"></div>
                            <div>Loading images...</div>
                        </div>
                    </div>
                </div>
                
                <!-- Orders Tab -->
                <div id="orders" class="tab-content">
                    <div class="dashboard-header">
                        <h1 class="dashboard-title">Orders</h1>
                        <div>
                            <button class="btn btn-primary" onclick="refreshOrders()">
                                <i class="fas fa-sync-alt"></i> Refresh
                            </button>
                        </div>
                    </div>
                    
                    <div class="form-container">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Order ID</th>
                                    <th>Product</th>
                                    <th>Customer</th>
                                    <th>Phone</th>
                                    <th>Date</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="ordersTable">
                                <tr>
                                    <td colspan="7" style="text-align: center; padding: 40px; color: var(--text-muted);">
                                        <i class="fas fa-shopping-cart" style="font-size: 2rem; margin-bottom: 15px; display: block; opacity: 0.5;"></i>
                                        No orders yet. Orders will appear here when customers contact via WhatsApp.
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- Settings Tab -->
                <div id="settings" class="tab-content">
                    <div class="dashboard-header">
                        <h1 class="dashboard-title">Settings</h1>
                        <div>
                            <button class="btn btn-primary" onclick="saveSettings()">
                                <i class="fas fa-save"></i> Save Settings
                            </button>
                        </div>
                    </div>
                    
                    <div class="form-container">
                        <h3 style="margin-top: 0;">Website Settings</h3>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="settingSiteName" class="form-label">
                                    <i class="fas fa-globe"></i> Site Name
                                </label>
                                <input type="text" 
                                       id="settingSiteName" 
                                       class="form-input" 
                                       value="Extra Miles Energy">
                            </div>
                            
                            <div class="form-group">
                                <label for="settingTagline" class="form-label">
                                    <i class="fas fa-quote-left"></i> Tagline
                                </label>
                                <input type="text" 
                                       id="settingTagline" 
                                       class="form-input" 
                                       value="Premium Lithium Battery Manufacturer">
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="settingPhone" class="form-label">
                                    <i class="fas fa-phone"></i> Phone Number
                                </label>
                                <input type="text" 
                                       id="settingPhone" 
                                       class="form-input" 
                                       value="+91-9991144903">
                            </div>
                            
                            <div class="form-group">
                                <label for="settingWhatsApp" class="form-label">
                                    <i class="fab fa-whatsapp"></i> WhatsApp Number
                                </label>
                                <input type="text" 
                                       id="settingWhatsApp" 
                                       class="form-input" 
                                       value="+91-7876555055">
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="settingEmail" class="form-label">
                                    <i class="fas fa-envelope"></i> Email
                                </label>
                                <input type="email" 
                                       id="settingEmail" 
                                       class="form-input" 
                                       value="extramilesenergy@gmail.com">
                            </div>
                            
                            <div class="form-group">
                                <label for="settingAddress" class="form-label">
                                    <i class="fas fa-map-marker-alt"></i> Address
                                </label>
                                <textarea id="settingAddress" 
                                          class="form-input" 
                                          rows="2">Skyline Stores, Shop No-8 Opp The Aryan School, Kaimri Road Hisar-125001</textarea>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="settingBusinessHours" class="form-label">
                                <i class="fas fa-clock"></i> Business Hours
                            </label>
                            <textarea id="settingBusinessHours" 
                                      class="form-input" 
                                      rows="2">Monday - Saturday: 9:00 AM - 8:00 PM\nSunday: 10:00 AM - 6:00 PM</textarea>
                        </div>
                    </div>
                    
                    <div class="form-container">
                        <h3 style="margin-top: 0;">GitHub Integration</h3>
                        
                        <div class="form-row">
                            <div class="form-group form-full">
                                <label for="settingGitHubToken" class="form-label">
                                    <i class="fab fa-github"></i> GitHub Personal Access Token
                                </label>
                                <input type="password" 
                                       id="settingGitHubToken" 
                                       class="form-input" 
                                       placeholder="Enter your GitHub token for automatic sync">
                                <div style="margin-top: 8px; font-size: 0.85rem; color: var(--text-muted);">
                                    Create token at: GitHub Settings → Developer Settings → Personal Access Tokens
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="settingGitHubUser" class="form-label">
                                    <i class="fas fa-user"></i> GitHub Username
                                </label>
                                <input type="text" 
                                       id="settingGitHubUser" 
                                       class="form-input" 
                                       value="parshantsahara">
                            </div>
                            
                            <div class="form-group">
                                <label for="settingGitHubRepo" class="form-label">
                                    <i class="fas fa-code-branch"></i> Repository Name
                                </label>
                                <input type="text" 
                                       id="settingGitHubRepo" 
                                       class="form-input" 
                                       value="extramilesenergy.in">
                            </div>
                        </div>
                        
                        <div style="margin-top: 20px;">
                            <button class="btn btn-success" onclick="testGitHubConnection()">
                                <i class="fas fa-plug"></i> Test Connection
                            </button>
                            <button class="btn btn-warning" onclick="syncAllToGitHub()">
                                <i class="fas fa-sync-alt"></i> Sync All Data
                            </button>
                        </div>
                    </div>
                    
                    <div class="form-container">
                        <h3 style="margin-top: 0;">Danger Zone</h3>
                        <div style="padding: 20px; border: 2px solid var(--danger); border-radius: var(--radius);">
                            <div style="color: var(--danger); margin-bottom: 15px;">
                                <i class="fas fa-exclamation-triangle"></i> Warning: These actions cannot be undone
                            </div>
                            <div style="display: flex; gap: 15px; flex-wrap: wrap;">
                                <button class="btn btn-danger" onclick="deleteAllProducts()">
                                    <i class="fas fa-trash"></i> Delete All Products
                                </button>
                                <button class="btn btn-danger" onclick="resetSettings()">
                                    <i class="fas fa-redo"></i> Reset Settings
                                </button>
                                <button class="btn btn-danger" onclick="clearAllData()">
                                    <i class="fas fa-broom"></i> Clear All Data
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
    
    <!-- Notification -->
    <div class="notification" id="notification"></div>
    
    <!-- Confirmation Modal -->
    <div class="modal" id="confirmationModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="modalTitle">Confirm Action</h3>
                <button class="modal-close" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-body" id="modalBody">
                Are you sure you want to perform this action?
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" onclick="closeModal()">Cancel</button>
                <button class="btn btn-danger" onclick="confirmAction()">Confirm</button>
            </div>
        </div>
    </div>
    
    <!-- Image Upload Modal -->
    <div class="modal" id="imageUploadModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Upload Image</h3>
                <button class="modal-close" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="file-upload" onclick="document.getElementById('bulkImageUpload').click()">
                    <div class="file-upload-icon">
                        <i class="fas fa-cloud-upload-alt"></i>
                    </div>
                    <div class="file-upload-text">
                        Click to upload images
                    </div>
                    <div class="file-upload-hint">
                        You can select multiple images (PNG, JPG, Max 5MB each)
                    </div>
                    <input type="file" 
                           id="bulkImageUpload" 
                           class="file-input" 
                           multiple 
                           accept="image/*"
                           onchange="handleBulkUpload(event)">
                </div>
                <div id="uploadProgress" style="margin-top: 20px; display: none;">
                    <div style="color: var(--text-muted); margin-bottom: 10px;">Uploading...</div>
                    <div style="background: rgba(255,255,255,0.1); border-radius: var(--radius-sm); overflow: hidden;">
                        <div id="progressBar" style="height: 6px; background: var(--accent); width: 0%; transition: width 0.3s;"></div>
                    </div>
                    <div id="uploadStatus" style="margin-top: 10px; font-size: 0.9rem; color: var(--text-muted);"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Script -->
    <script>
        // ===== CONFIGURATION =====
        const ADMIN_PASSWORD = 'Sky12345'; // Change this to your preferred password
        const GITHUB_USER = 'parshantsahara';
        const GITHUB_REPO = 'extramilesenergy.in';
        const PRODUCTS_PATH = 'content/products';
        const UPLOADS_PATH = 'uploads';
        
        // ===== STATE MANAGEMENT =====
        let currentUser = null;
        let products = [];
        let settings = {};
        let pendingAction = null;
        
        // ===== INITIALIZATION =====
        document.addEventListener('DOMContentLoaded', function() {
            // Check if already logged in
            const token = localStorage.getItem('admin_token');
            if (token === ADMIN_PASSWORD) {
                showAdminDashboard();
            } else {
                showLoginPage();
            }
            
            // Load settings
            loadSettings();
        });
        
        // ===== AUTHENTICATION =====
        function login() {
            const password = document.getElementById('password').value;
            const messageDiv = document.getElementById('loginMessage');
            
            if (!password) {
                showMessage(messageDiv, 'Please enter password', 'error');
                return;
            }
            
            if (password === ADMIN_PASSWORD) {
                // Save token
                localStorage.setItem('admin_token', password);
                showAdminDashboard();
                showNotification('Login successful!', 'success');
            } else {
                showMessage(messageDiv, 'Incorrect password', 'error');
                document.getElementById('password').value = '';
                document.getElementById('password').focus();
            }
        }
        
        function logout() {
            localStorage.removeItem('admin_token');
            showLoginPage();
            showNotification('Logged out successfully', 'info');
        }
        
        function showLoginPage() {
            document.getElementById('loginPage').style.display = 'flex';
            document.getElementById('adminDashboard').style.display = 'none';
        }
        
        function showAdminDashboard() {
            document.getElementById('loginPage').style.display = 'none';
            document.getElementById('adminDashboard').style.display = 'block';
            loadDashboard();
        }
        
        // ===== DASHBOARD FUNCTIONS =====
        function loadDashboard() {
            loadProducts();
            loadStats();
            loadRecentActivity();
        }
        
        function showTab(tabId) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Remove active class from menu items
            document.querySelectorAll('.menu-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // Show selected tab
            document.getElementById(tabId).classList.add('active');
            
            // Activate corresponding menu item
            const menuItems = {
                'dashboard': 0,
                'products': 1,
                'addProduct': 2,
                'images': 3,
                'orders': 4,
                'settings': 5
            };
            
            if (menuItems[tabId] !== undefined) {
                document.querySelectorAll('.menu-item')[menuItems[tabId]].classList.add('active');
            }
            
            // Load data for tab
            switch(tabId) {
                case 'products':
                    loadProductsList();
                    break;
                case 'images':
                    loadImageGallery();
                    break;
                case 'orders':
                    loadOrders();
                    break;
            }
            
            // Close sidebar on mobile
            if (window.innerWidth <= 1024) {
                document.getElementById('sidebar').classList.remove('active');
            }
        }
        
        function toggleSidebar() {
            document.getElementById('sidebar').classList.toggle('active');
        }
        
        // ===== PRODUCT MANAGEMENT =====
        async function loadProducts() {
            try {
                // Try to load from GitHub first
                const response = await fetch(`https://api.github.com/repos/${GITHUB_USER}/${GITHUB_REPO}/contents/${PRODUCTS_PATH}`);
                
                if (response.ok) {
                    const files = await response.json();
                    const jsonFiles = files.filter(file => file.name.endsWith('.json'));
                    
                    products = [];
                    for (const file of jsonFiles) {
                        const productResponse = await fetch(file.download_url);
                        const product = await productResponse.json();
                        product.id = file.name.replace('.json', '');
                        products.push(product);
                    }
                } else {
                    // Fallback to localStorage
                    const storedProducts = localStorage.getItem('extra_miles_products');
                    products = storedProducts ? JSON.parse(storedProducts) : [];
                }
                
                updateStats();
                return products;
            } catch (error) {
                console.error('Error loading products:', error);
                // Fallback to localStorage
                const storedProducts = localStorage.getItem('extra_miles_products');
                products = storedProducts ? JSON.parse(storedProducts) : [];
                updateStats();
                return products;
            }
        }
        
        async function loadProductsList() {
            const container = document.getElementById('productsList');
            container.innerHTML = '<div class="loading"><div class="spinner"></div><div>Loading products...</div></div>';
            
            await loadProducts();
            
            if (products.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">
                            <i class="fas fa-box-open"></i>
                        </div>
                        <h3 class="empty-state-title">No Products Found</h3>
                        <p class="empty-state-description">
                            You haven't added any products yet. Start by adding your first product.
                        </p>
                        <button class="btn btn-primary" onclick="showTab('addProduct')">
                            <i class="fas fa-plus"></i> Add First Product
                        </button>
                    </div>
                `;
                return;
            }
            
            let html = '<div class="products-grid">';
            
            products.forEach((product, index) => {
                html += `
                    <div class="product-admin-card">
                        <div class="product-status ${product.status === 'active' ? 'status-active' : 'status-draft'}">
                            ${product.status === 'active' ? 'Active' : 'Draft'}
                        </div>
                        
                        <img src="${product.image || '../placeholder.png'}" 
                             alt="${product.name}" 
                             class="product-admin-image"
                             onerror="this.src='../placeholder.png'">
                        
                        <h3 class="product-admin-title">${product.name}</h3>
                        <div class="product-admin-specs">${product.voltage || ''}</div>
                        <div class="product-admin-category">${product.category || 'EV Battery'}</div>
                        
                        <ul class="product-admin-features">
                            ${(product.features || []).slice(0, 3).map(feature => `<li>${feature}</li>`).join('')}
                            ${(product.features || []).length > 3 ? '<li>...</li>' : ''}
                        </ul>
                        
                        <div class="product-admin-actions">
                            <button class="btn btn-primary btn-small" onclick="editProduct(${index})">
                                <i class="fas fa-edit"></i> Edit
                            </button>
                            <button class="btn btn-danger btn-small" onclick="deleteProduct(${index})">
                                <i class="fas fa-trash"></i> Delete
                            </button>
                        </div>
                    </div>
                `;
            });
            
            html += '</div>';
            container.innerHTML = html;
        }
        
        function filterProducts(filter) {
            // Implementation for filtering products
            showNotification('Filter: ' + filter, 'info');
        }
        
        function previewImage(event) {
            const file = event.target.files[0];
            const previewDiv = document.getElementById('imagePreview');
            
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    previewDiv.innerHTML = `
                        <img src="${e.target.result}" class="preview-image" alt="Preview">
                        <div class="preview-info">
                            ${file.name} (${Math.round(file.size / 1024)} KB)
                        </div>
                        <button class="btn btn-outline btn-small" onclick="clearPreview()">
                            <i class="fas fa-times"></i> Remove
                        </button>
                    `;
                };
                reader.readAsDataURL(file);
            }
        }
        
        function clearPreview() {
            document.getElementById('imagePreview').innerHTML = '';
            document.getElementById('productImage').value = '';
        }
        
        function clearForm() {
            document.getElementById('productName').value = '';
            document.getElementById('productVoltage').value = '';
            document.getElementById('productCategory').value = 'EV Battery';
            document.getElementById('productPrice').value = '';
            document.getElementById('productRange').value = '';
            document.getElementById('productStatus').value = 'active';
            document.getElementById('productFeatures').value = '';
            document.getElementById('productDescription').value = '';
            clearPreview();
            showMessage(document.getElementById('addProductMessage'), 'Form cleared', 'success');
        }
        
        async function saveProduct() {
            const name = document.getElementById('productName').value.trim();
            const voltage = document.getElementById('productVoltage').value.trim();
            const category = document.getElementById('productCategory').value;
            const price = document.getElementById('productPrice').value.trim();
            const range = document.getElementById('productRange').value.trim();
            const status = document.getElementById('productStatus').value;
            const features = document.getElementById('productFeatures').value
                .split('\n')
                .map(f => f.trim())
                .filter(f => f !== '');
            const description = document.getElementById('productDescription').value.trim();
            const imageFile = document.getElementById('productImage').files[0];
            
            const messageDiv = document.getElementById('addProductMessage');
            
            // Validation
            if (!name || !voltage || features.length === 0) {
                showMessage(messageDiv, 'Please fill all required fields (Name, Voltage, Features)', 'error');
                return;
            }
            
            if (!imageFile) {
                showMessage(messageDiv, 'Please upload a product image', 'error');
                return;
            }
            
            // Create product object
            const product = {
                id: Date.now().toString(),
                name,
                voltage,
                category,
                price: price || null,
                range: range || null,
                status,
                features,
                description: description || null,
                image: `../${UPLOADS_PATH}/${imageFile.name}`,
                createdAt: new Date().toISOString(),
                updatedAt: new Date().toISOString()
            };
            
            // Upload image to GitHub
            try {
                showNotification('Uploading image to GitHub...', 'info');
                
                // In a real implementation, you would upload to GitHub here
                // For now, we'll simulate it
                
                // Save product to localStorage
                products.push(product);
                localStorage.setItem('extra_miles_products', JSON.stringify(products));
                
                // Try to save to GitHub
                await saveProductToGitHub(product, imageFile);
                
                showMessage(messageDiv, 'Product saved successfully!', 'success');
                showNotification('Product added successfully!', 'success');
                
                // Clear form
                clearForm();
                
                // Update stats
                updateStats();
                
                // Switch to products tab
                setTimeout(() => {
                    showTab('products');
                    loadProductsList();
                }, 1500);
                
            } catch (error) {
                console.error('Error saving product:', error);
                showMessage(messageDiv, 'Product saved locally. GitHub sync failed: ' + error.message, 'warning');
                
                // Still save to localStorage
                products.push(product);
                localStorage.setItem('extra_miles_products', JSON.stringify(products));
                updateStats();
            }
        }
        
        async function saveProductToGitHub(product, imageFile) {
            // This is a simplified version
            // In production, you would need GitHub API with proper authentication
            
            const productId = product.id;
            const productJson = JSON.stringify(product, null, 2);
            
            // For demo purposes, we'll just show a success message
            // Actual implementation would require:
            // 1. GitHub Personal Access Token
            // 2. Proper API calls to create/update files
            
            return new Promise((resolve) => {
                setTimeout(() => {
                    console.log('Would save to GitHub:', {
                        productJson,
                        imageFileName: imageFile.name
                    });
                    resolve();
                }, 1000);
            });
        }
        
        function editProduct(index) {
            const product = products[index];
            
            // Fill form
            document.getElementById('productName').value = product.name;
            document.getElementById('productVoltage').value = product.voltage;
            document.getElementById('productCategory').value = product.category;
            document.getElementById('productPrice').value = product.price || '';
            document.getElementById('productRange').value = product.range || '';
            document.getElementById('productStatus').value = product.status;
            document.getElementById('productFeatures').value = (product.features || []).join('\n');
            document.getElementById('productDescription').value = product.description || '';
            
            // Show preview if image exists
            if (product.image) {
                document.getElementById('imagePreview').innerHTML = `
                    <img src="${product.image}" class="preview-image" alt="Preview">
                    <div class="preview-info">
                        Existing image
                    </div>
                `;
            }
            
            // Change save button
            const saveBtn = document.querySelector('#addProduct .btn-primary');
            saveBtn.innerHTML = '<i class="fas fa-save"></i> Update Product';
            saveBtn.onclick = function() {
                updateProduct(index);
            };
            
            showTab('addProduct');
            showNotification('Editing product: ' + product.name, 'info');
        }
        
        function updateProduct(index) {
            // Similar to saveProduct but updates existing product
            showNotification('Update functionality would be implemented here', 'info');
        }
        
        function deleteProduct(index) {
            const product = products[index];
            
            showConfirmationModal(
                'Delete Product',
                `Are you sure you want to delete "${product.name}"? This action cannot be undone.`,
                function() {
                    products.splice(index, 1);
                    localStorage.setItem('extra_miles_products', JSON.stringify(products));
                    loadProductsList();
                    updateStats();
                    showNotification('Product deleted successfully', 'success');
                }
            );
        }
        
        // ===== IMAGE MANAGEMENT =====
        function loadImageGallery() {
            const container = document.getElementById('imageGallery');
            // Implementation would load images from uploads folder
        }
        
        function uploadNewImage() {
            showModal('imageUploadModal');
        }
        
        function handleBulkUpload(event) {
            // Implementation for bulk image upload
        }
        
        // ===== SETTINGS =====
        function loadSettings() {
            const savedSettings = localStorage.getItem('admin_settings');
            if (savedSettings) {
                settings = JSON.parse(savedSettings);
                
                // Populate form fields
                document.getElementById('settingSiteName').value = settings.siteName || 'Extra Miles Energy';
                document.getElementById('settingTagline').value = settings.tagline || 'Premium Lithium Battery Manufacturer';
                document.getElementById('settingPhone').value = settings.phone || '+91-9991144903';
                document.getElementById('settingWhatsApp').value = settings.whatsapp || '+91-7876555055';
                document.getElementById('settingEmail').value = settings.email || 'extramilesenergy@gmail.com';
                document.getElementById('settingAddress').value = settings.address || 'Skyline Stores, Shop No-8 Opp The Aryan School, Kaimri Road Hisar-125001';
                document.getElementById('settingBusinessHours').value = settings.businessHours || 'Monday - Saturday: 9:00 AM - 8:00 PM\nSunday: 10:00 AM - 6:00 PM';
                document.getElementById('settingGitHubToken').value = settings.githubToken || '';
                document.getElementById('settingGitHubUser').value = settings.githubUser || 'parshantsahara';
                document.getElementById('settingGitHubRepo').value = settings.githubRepo || 'extramilesenergy.in';
            }
        }
        
        function saveSettings() {
            settings = {
                siteName: document.getElementById('settingSiteName').value,
                tagline: document.getElementById('settingTagline').value,
                phone: document.getElementById('settingPhone').value,
                whatsapp: document.getElementById('settingWhatsApp').value,
                email: document.getElementById('settingEmail').value,
                address: document.getElementById('settingAddress').value,
                businessHours: document.getElementById('settingBusinessHours').value,
                githubToken: document.getElementById('settingGitHubToken').value,
                githubUser: document.getElementById('settingGitHubUser').value,
                githubRepo: document.getElementById('settingGitHubRepo').value,
                updatedAt: new Date().toISOString()
            };
            
            localStorage.setItem('admin_settings', JSON.stringify(settings));
            showNotification('Settings saved successfully!', 'success');
        }
        
        function testGitHubConnection() {
            showNotification('Testing GitHub connection...', 'info');
            // Implementation would test GitHub API connection
        }
        
        function syncAllToGitHub() {
            showNotification('Syncing all data to GitHub...', 'info');
            // Implementation would sync all data to GitHub
        }
        
        // ===== DANGER ZONE FUNCTIONS =====
        function deleteAllProducts() {
            showConfirmationModal(
                'Delete All Products',
                'Are you sure you want to delete ALL products? This action cannot be undone.',
                function() {
                    products = [];
                    localStorage.removeItem('extra_miles_products');
                    loadProductsList();
                    updateStats();
                    showNotification('All products deleted', 'success');
                }
            );
        }
        
        function resetSettings() {
            showConfirmationModal(
                'Reset Settings',
                'Are you sure you want to reset all settings to default?',
                function() {
                    localStorage.removeItem('admin_settings');
                    loadSettings();
                    showNotification('Settings reset to default', 'success');
                }
            );
        }
        
        function clearAllData() {
            showConfirmationModal(
                'Clear All Data',
                'This will delete ALL products, images, and settings. Are you absolutely sure?',
                function() {
                    localStorage.clear();
                    products = [];
                    settings = {};
                    loadSettings();
                    loadProductsList();
                    updateStats();
                    showNotification('All data cleared', 'success');
                }
            );
        }
        
        // ===== UTILITY FUNCTIONS =====
        function showMessage(element, text, type) {
            element.textContent = text;
            element.className = `message ${type}`;
            element.style.display = 'block';
            
            setTimeout(() => {
                element.style.display = 'none';
            }, 3000);
        }
        
        function showNotification(text, type = 'info') {
            const notification = document.getElementById('notification');
            const icon = type === 'success' ? 'fa-check-circle' : 
                        type === 'error' ? 'fa-exclamation-circle' : 
                        'fa-info-circle';
            
            notification.innerHTML = `
                <div class="notification-icon">
                    <i class="fas ${icon}"></i>
                </div>
                <div class="notification-content">
                    <div class="notification-title">${type.charAt(0).toUpperCase() + type.slice(1)}</div>
                    <div class="notification-message">${text}</div>
                </div>
            `;
            
            notification.className = `notification ${type} show`;
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }
        
        function showConfirmationModal(title, message, callback) {
            document.getElementById('modalTitle').textContent = title;
            document.getElementById('modalBody').textContent = message;
            pendingAction = callback;
            showModal('confirmationModal');
        }
        
        function showModal(modalId) {
            document.getElementById(modalId).classList.add('active');
        }
        
        function closeModal() {
            document.querySelectorAll('.modal').forEach(modal => {
                modal.classList.remove('active');
            });
            pendingAction = null;
        }
        
        function confirmAction() {
            if (pendingAction) {
                pendingAction();
            }
            closeModal();
        }
        
        function updateStats() {
            document.getElementById('totalProducts').textContent = products.length;
            // Other stats would be calculated here
        }
        
        function loadStats() {
            // Implementation for loading various stats
            updateStats();
        }
        
        function loadRecentActivity() {
            // Implementation for loading recent activity
        }
        
        function loadOrders() {
            // Implementation for loading orders
        }
        
        function syncWithGitHub() {
            showNotification('Syncing with GitHub...', 'info');
            // Implementation for GitHub sync
        }
        
        function exportProducts() {
            const dataStr = JSON.stringify(products, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            const exportFileDefaultName = 'extra-miles-products.json';
            
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
            
            showNotification('Products exported successfully!', 'success');
        }
        
        function clearCache() {
            // Clear various caches
            showNotification('Cache cleared successfully!', 'success');
        }
        
        function openWebsite() {
            window.open('../', '_blank');
        }
        
        function refreshOrders() {
            showNotification('Refreshing orders...', 'info');
        }
        
        // ===== WINDOW EVENT LISTENERS =====
        window.addEventListener('click', function(event) {
            // Close modals when clicking outside
            document.querySelectorAll('.modal').forEach(modal => {
                if (event.target === modal) {
                    closeModal();
                }
            });
            
            // Close sidebar when clicking outside on mobile
            if (window.innerWidth <= 1024) {
                const sidebar = document.getElementById('sidebar');
                if (sidebar.classList.contains('active') && 
                    !event.target.closest('.admin-sidebar') && 
                    !event.target.closest('.sidebar-toggle')) {
                    sidebar.classList.remove('active');
                }
            }
        });
        
        // Close sidebar on Escape key
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                closeModal();
                document.getElementById('sidebar').classList.remove('active');
            }
        });
        
        // Auto-focus password field on login page
        document.getElementById('password')?.addEventListener('focus', function() {
            document.getElementById('loginMessage').style.display = 'none';
        });
        
        // ===== INITIAL SETUP COMPLETE =====
        console.log('Admin panel loaded successfully!');
        console.log('Password: Sky12345');
        console.log('GitHub Repo: https://github.com/parshantsahara/extramilesenergy.in');
    </script>
</body>
</html>
