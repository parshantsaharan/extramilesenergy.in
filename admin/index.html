<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - Extra Miles Energy</title>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        /* ===== CSS VARIABLES ===== */
        :root {
            --primary: #0b1220;
            --secondary: #142044;
            --accent: #35d0ff;
            --accent2: #7c5cff;
            --success: #45ff90;
            --warning: #ffb145;
            --danger: #ff3570;
            --text: #ffffff;
            --text-muted: #a0b3d9;
            --border: rgba(255, 255, 255, 0.15);
            --card-bg: rgba(20, 32, 68, 0.95);
            --header-bg: rgba(11, 18, 32, 0.98);
            --overlay: rgba(11, 18, 32, 0.97);
            
            --shadow: 0 15px 35px rgba(0, 0, 0, 0.5);
            --shadow-light: 0 8px 25px rgba(0, 0, 0, 0.3);
            --radius: 16px;
            --radius-sm: 10px;
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        /* ===== RESET & BASE ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        html {
            scroll-behavior: smooth;
        }
        
        body {
            font-family: 'Inter', system-ui, -apple-system, sans-serif;
            background: var(--primary);
            color: var(--text);
            line-height: 1.6;
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 30%, rgba(124, 92, 255, 0.12) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(53, 208, 255, 0.08) 0%, transparent 50%);
            z-index: -1;
            pointer-events: none;
        }
        
        h1, h2, h3, h4, h5, h6 {
            font-weight: 600;
            line-height: 1.2;
            margin-bottom: 1rem;
        }
        
        a {
            color: inherit;
            text-decoration: none;
            transition: var(--transition);
        }
        
        img {
            max-width: 100%;
            height: auto;
            display: block;
        }
        
        .container {
            width: 100%;
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        /* ===== LOGIN PAGE ===== */
        .login-container {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            background: linear-gradient(135deg, rgba(11, 18, 32, 0.95), rgba(20, 32, 68, 0.95));
        }
        
        .login-box {
            background: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 50px 40px;
            width: 100%;
            max-width: 420px;
            box-shadow: var(--shadow);
            text-align: center;
            backdrop-filter: blur(15px);
        }
        
        .login-logo {
            width: 180px;
            margin: 0 auto 30px;
            border-radius: var(--radius-sm);
            border: 1px solid var(--border);
            padding: 10px;
            background: rgba(255, 255, 255, 0.05);
        }
        
        .login-title {
            font-size: 2.2rem;
            margin-bottom: 10px;
            background: linear-gradient(135deg, var(--accent), var(--accent2));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .login-subtitle {
            color: var(--text-muted);
            margin-bottom: 40px;
            font-size: 1rem;
        }
        
        .form-group {
            margin-bottom: 25px;
            text-align: left;
        }
        
        .form-label {
            display: block;
            margin-bottom: 10px;
            color: var(--text-muted);
            font-weight: 500;
            font-size: 0.95rem;
        }
        
        .form-input {
            width: 100%;
            padding: 15px 18px;
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid var(--border);
            border-radius: var(--radius-sm);
            color: var(--text);
            font-size: 1rem;
            transition: var(--transition);
        }
        
        .form-input:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(53, 208, 255, 0.15);
            background: rgba(255, 255, 255, 0.12);
        }
        
        .message {
            padding: 15px 20px;
            border-radius: var(--radius-sm);
            margin-bottom: 20px;
            text-align: left;
            display: none;
            animation: slideIn 0.3s ease;
            backdrop-filter: blur(10px);
        }
        
        .message.error {
            background: rgba(255, 53, 112, 0.1);
            border: 1px solid rgba(255, 53, 112, 0.3);
            color: var(--danger);
        }
        
        .message.success {
            background: rgba(69, 255, 144, 0.1);
            border: 1px solid rgba(69, 255, 144, 0.3);
            color: var(--success);
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* ===== BUTTONS ===== */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            padding: 14px 28px;
            border-radius: var(--radius-sm);
            font-weight: 600;
            font-size: 1rem;
            border: none;
            cursor: pointer;
            transition: var(--transition);
            text-align: center;
            position: relative;
            overflow: hidden;
            z-index: 1;
        }
        
        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05));
            transform: translateX(-100%);
            transition: transform 0.5s;
            z-index: -1;
        }
        
        .btn:hover::before {
            transform: translateX(0);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--accent), var(--accent2));
            color: white;
            box-shadow: var(--shadow-light);
        }
        
        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 30px rgba(53, 208, 255, 0.3);
        }
        
        .btn-success {
            background: linear-gradient(135deg, var(--success), #2bc47d);
            color: white;
        }
        
        .btn-warning {
            background: linear-gradient(135deg, var(--warning), #ff8c00);
            color: white;
        }
        
        .btn-danger {
            background: linear-gradient(135deg, var(--danger), #ff2b5e);
            color: white;
        }
        
        .btn-outline {
            background: transparent;
            color: var(--text);
            border: 2px solid var(--border);
        }
        
        .btn-outline:hover {
            border-color: var(--accent);
            background: rgba(53, 208, 255, 0.1);
        }
        
        .btn-small {
            padding: 10px 20px;
            font-size: 0.9rem;
        }
        
        .btn-large {
            padding: 18px 36px;
            font-size: 1.1rem;
        }
        
        /* ===== ADMIN DASHBOARD ===== */
        .admin-container {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        /* Header */
        .admin-header {
            background: var(--header-bg);
            backdrop-filter: blur(15px);
            border-bottom: 1px solid var(--border);
            padding: 18px 0;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
        }
        
        .header-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .admin-logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .admin-logo-img {
            width: 50px;
            height: 50px;
            border-radius: var(--radius-sm);
            border: 1px solid var(--border);
            padding: 5px;
            background: rgba(255, 255, 255, 0.05);
        }
        
        .admin-logo-text h2 {
            font-size: 1.4rem;
            margin: 0;
        }
        
        .admin-logo-text .subtitle {
            font-size: 0.9rem;
            color: var(--text-muted);
            margin-top: 3px;
        }
        
        .admin-actions {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .user-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .user-avatar {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--accent), var(--accent2));
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            color: white;
            font-size: 1.2rem;
        }
        
        /* Main Content */
        .admin-main {
            flex: 1;
            padding: 30px 0;
            background: rgba(11, 18, 32, 0.5);
        }
        
        /* Tabs */
        .tabs-container {
            background: var(--card-bg);
            border-radius: var(--radius);
            border: 1px solid var(--border);
            overflow: hidden;
            margin-bottom: 30px;
            backdrop-filter: blur(10px);
        }
        
        .tabs-header {
            display: flex;
            overflow-x: auto;
            background: rgba(255, 255, 255, 0.03);
            border-bottom: 1px solid var(--border);
        }
        
        .tab-btn {
            padding: 20px 30px;
            background: none;
            border: none;
            color: var(--text-muted);
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: var(--transition);
            white-space: nowrap;
            position: relative;
        }
        
        .tab-btn:hover {
            color: var(--accent);
            background: rgba(53, 208, 255, 0.05);
        }
        
        .tab-btn.active {
            color: var(--accent);
            background: rgba(53, 208, 255, 0.1);
        }
        
        .tab-btn.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: var(--accent);
        }
        
        .tab-content {
            display: none;
            padding: 30px;
            animation: fadeIn 0.3s ease;
        }
        
        .tab-content.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        /* Dashboard Content */
        .dashboard-title {
            font-size: 2.2rem;
            margin-bottom: 30px;
            background: linear-gradient(135deg, var(--accent), var(--accent2));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }
        
        .stat-card {
            background: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 30px 25px;
            transition: var(--transition);
            backdrop-filter: blur(10px);
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
            border-color: var(--accent);
            box-shadow: var(--shadow);
        }
        
        .stat-icon {
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(53, 208, 255, 0.1);
            border-radius: 50%;
            margin-bottom: 20px;
            font-size: 1.8rem;
            color: var(--accent);
        }
        
        .stat-value {
            font-size: 2.8rem;
            font-weight: 800;
            color: var(--accent);
            margin-bottom: 10px;
            line-height: 1;
        }
        
        .stat-label {
            color: var(--text-muted);
            font-size: 1rem;
        }
        
        /* Forms */
        .form-container {
            background: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 35px;
            margin-bottom: 30px;
            backdrop-filter: blur(10px);
        }
        
        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 25px;
            margin-bottom: 25px;
        }
        
        .form-full {
            grid-column: 1 / -1;
        }
        
        /* File Upload */
        .file-upload {
            border: 2px dashed var(--border);
            border-radius: var(--radius);
            padding: 50px 30px;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            background: rgba(255, 255, 255, 0.03);
        }
        
        .file-upload:hover {
            border-color: var(--accent);
            background: rgba(53, 208, 255, 0.05);
        }
        
        .file-upload-icon {
            font-size: 3.5rem;
            color: var(--accent);
            margin-bottom: 20px;
            opacity: 0.8;
        }
        
        .file-upload-text {
            color: var(--text-muted);
            margin-bottom: 15px;
            font-size: 1.1rem;
        }
        
        .file-upload-hint {
            font-size: 0.9rem;
            color: var(--text-muted);
            opacity: 0.7;
        }
        
        .file-input {
            display: none;
        }
        
        .image-preview {
            margin-top: 25px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
        }
        
        .preview-image {
            max-width: 250px;
            max-height: 250px;
            border-radius: var(--radius);
            border: 1px solid var(--border);
            box-shadow: var(--shadow-light);
            object-fit: contain;
            background: rgba(0, 0, 0, 0.2);
            padding: 15px;
        }
        
        .preview-info {
            color: var(--text-muted);
            font-size: 0.95rem;
            text-align: center;
        }
        
        /* Products Grid */
        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 30px;
        }
        
        .product-admin-card {
            background: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 25px;
            transition: var(--transition);
            position: relative;
            backdrop-filter: blur(10px);
        }
        
        .product-admin-card:hover {
            transform: translateY(-8px);
            border-color: var(--accent);
            box-shadow: var(--shadow);
        }
        
        .product-status {
            position: absolute;
            top: 20px;
            right: 20px;
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            z-index: 1;
        }
        
        .status-active {
            background: rgba(69, 255, 144, 0.15);
            color: var(--success);
            border: 1px solid rgba(69, 255, 144, 0.3);
        }
        
        .status-draft {
            background: rgba(255, 177, 69, 0.15);
            color: var(--warning);
            border: 1px solid rgba(255, 177, 69, 0.3);
        }
        
        .product-admin-image {
            width: 100%;
            height: 200px;
            object-fit: contain;
            border-radius: var(--radius-sm);
            background: rgba(0, 0, 0, 0.2);
            margin-bottom: 20px;
            padding: 15px;
            border: 1px solid var(--border);
        }
        
        .product-admin-title {
            font-size: 1.3rem;
            margin-bottom: 12px;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            min-height: 3.2em;
        }
        
        .product-admin-specs {
            color: var(--accent);
            font-size: 1rem;
            margin-bottom: 15px;
            font-weight: 600;
        }
        
        .product-admin-category {
            display: inline-block;
            padding: 6px 14px;
            background: rgba(53, 208, 255, 0.1);
            color: var(--accent);
            border-radius: 20px;
            font-size: 0.85rem;
            margin-bottom: 15px;
            border: 1px solid rgba(53, 208, 255, 0.3);
        }
        
        .product-admin-features {
            list-style: none;
            margin-bottom: 20px;
            max-height: 120px;
            overflow-y: auto;
            padding-right: 10px;
        }
        
        .product-admin-features::-webkit-scrollbar {
            width: 5px;
        }
        
        .product-admin-features::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 5px;
        }
        
        .product-admin-features::-webkit-scrollbar-thumb {
            background: var(--accent);
            border-radius: 5px;
        }
        
        .product-admin-features li {
            padding: 8px 0;
            padding-left: 25px;
            position: relative;
            color: var(--text-muted);
            font-size: 0.9rem;
        }
        
        .product-admin-features li::before {
            content: '✓';
            position: absolute;
            left: 0;
            color: var(--success);
            font-weight: bold;
        }
        
        .product-admin-actions {
            display: flex;
            gap: 12px;
            margin-top: 20px;
        }
        
        .product-admin-actions .btn {
            flex: 1;
        }
        
        /* Table */
        .data-table-container {
            overflow-x: auto;
            border-radius: var(--radius);
            border: 1px solid var(--border);
            background: var(--card-bg);
            backdrop-filter: blur(10px);
        }
        
        .data-table {
            width: 100%;
            border-collapse: collapse;
            min-width: 800px;
        }
        
        .data-table th {
            background: rgba(53, 208, 255, 0.1);
            color: var(--accent);
            font-weight: 600;
            text-align: left;
            padding: 20px;
            border-bottom: 1px solid var(--border);
        }
        
        .data-table td {
            padding: 20px;
            border-bottom: 1px solid var(--border);
            color: var(--text-muted);
        }
        
        .data-table tr:hover {
            background: rgba(255, 255, 255, 0.03);
        }
        
        .table-actions {
            display: flex;
            gap: 10px;
        }
        
        /* Loading */
        .loading {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 80px 20px;
            color: var(--text-muted);
            text-align: center;
        }
        
        .spinner {
            border: 4px solid rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            border-top: 4px solid var(--accent);
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin-bottom: 25px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 80px 20px;
            color: var(--text-muted);
        }
        
        .empty-state-icon {
            font-size: 4.5rem;
            color: var(--accent);
            margin-bottom: 25px;
            opacity: 0.5;
        }
        
        .empty-state-title {
            font-size: 1.8rem;
            margin-bottom: 15px;
            color: var(--text);
        }
        
        .empty-state-description {
            max-width: 500px;
            margin: 0 auto 35px;
            font-size: 1.1rem;
            line-height: 1.6;
        }
        
        /* Notification */
        .notification {
            position: fixed;
            top: 100px;
            right: 30px;
            padding: 20px 30px;
            border-radius: var(--radius);
            background: var(--card-bg);
            border: 1px solid var(--border);
            box-shadow: var(--shadow);
            transform: translateX(150%);
            transition: transform 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            z-index: 2000;
            max-width: 450px;
            backdrop-filter: blur(15px);
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .notification.success {
            border-left: 5px solid var(--success);
        }
        
        .notification.error {
            border-left: 5px solid var(--danger);
        }
        
        .notification.info {
            border-left: 5px solid var(--accent);
        }
        
        .notification-icon {
            font-size: 1.5rem;
        }
        
        .notification-content {
            flex: 1;
        }
        
        .notification-title {
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 1.1rem;
        }
        
        .notification-message {
            font-size: 0.95rem;
            color: var(--text-muted);
            line-height: 1.5;
        }
        
        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--overlay);
            backdrop-filter: blur(10px);
            z-index: 3000;
            align-items: center;
            justify-content: center;
            padding: 20px;
            animation: fadeIn 0.3s ease;
        }
        
        .modal.active {
            display: flex;
        }
        
        .modal-content {
            background: var(--card-bg);
            border-radius: var(--radius);
            padding: 40px;
            width: 100%;
            max-width: 500px;
            border: 1px solid var(--border);
            box-shadow: var(--shadow);
            position: relative;
            animation: modalSlideIn 0.3s ease;
            backdrop-filter: blur(15px);
        }
        
        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-25px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }
        
        .modal-title {
            font-size: 1.6rem;
            margin: 0;
        }
        
        .modal-close {
            background: none;
            border: none;
            color: var(--text-muted);
            font-size: 1.8rem;
            cursor: pointer;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: var(--transition);
        }
        
        .modal-close:hover {
            background: rgba(255, 255, 255, 0.1);
            color: var(--text);
        }
        
        .modal-body {
            margin-bottom: 30px;
            color: var(--text-muted);
            line-height: 1.6;
        }
        
        .modal-footer {
            display: flex;
            justify-content: flex-end;
            gap: 20px;
        }
        
        /* Progress Bar */
        .progress-container {
            margin: 30px 0;
        }
        
        .progress-bar {
            height: 10px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 5px;
            overflow: hidden;
            margin-bottom: 10px;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, var(--accent), var(--accent2));
            border-radius: 5px;
            transition: width 0.3s ease;
            width: 0%;
        }
        
        .progress-text {
            display: flex;
            justify-content: space-between;
            color: var(--text-muted);
            font-size: 0.9rem;
        }
        
        /* Responsive */
        @media (max-width: 1200px) {
            .products-grid {
                grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            }
        }
        
        @media (max-width: 992px) {
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .products-grid {
                grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            }
        }
        
        @media (max-width: 768px) {
            .login-box {
                padding: 40px 25px;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .products-grid {
                grid-template-columns: 1fr;
            }
            
            .admin-actions {
                flex-direction: column;
                gap: 15px;
                align-items: flex-start;
            }
            
            .tabs-header {
                flex-wrap: wrap;
            }
            
            .tab-btn {
                padding: 15px 20px;
                flex: 1;
                min-width: 120px;
            }
            
            .modal-content {
                padding: 30px 25px;
            }
            
            .modal-footer {
                flex-direction: column;
            }
            
            .modal-footer .btn {
                width: 100%;
            }
        }
        
        @media (max-width: 480px) {
            .container {
                padding: 0 15px;
            }
            
            .form-container {
                padding: 25px 20px;
            }
            
            .tab-content {
                padding: 25px 20px;
            }
            
            .notification {
                right: 15px;
                left: 15px;
                max-width: none;
            }
            
            .product-admin-actions {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <!-- Login Page -->
    <div id="loginPage" class="login-container">
        <div class="login-box">
            <img src="../logo.png" alt="Extra Miles Energy" class="login-logo">
            <h1 class="login-title">Admin Panel</h1>
            <p class="login-subtitle">Manage products and sync with GitHub</p>
            
            <div id="loginMessage" class="message"></div>
            
            <div class="form-group">
                <label for="password" class="form-label">
                    <i class="fas fa-lock"></i> Admin Password
                </label>
                <input type="password" 
                       id="password" 
                       class="form-input" 
                       placeholder="Enter admin password"
                       autocomplete="current-password"
                       onkeypress="if(event.key === 'Enter') login()">
                <div style="margin-top: 8px; font-size: 0.85rem; color: var(--text-muted);">
                    Default password: Sky12345
                </div>
            </div>
            
            <button class="btn btn-primary btn-large" onclick="login()" style="width: 100%;">
                <i class="fas fa-sign-in-alt"></i> Login to Admin Panel
            </button>
            
            <div style="margin-top: 35px; padding-top: 25px; border-top: 1px solid var(--border);">
                <p style="color: var(--text-muted); font-size: 0.9rem; line-height: 1.6;">
                    <i class="fas fa-info-circle"></i> 
                    After login, configure GitHub token in Settings tab for automatic sync.
                </p>
            </div>
        </div>
    </div>
    
    <!-- Admin Dashboard -->
    <div id="adminDashboard" class="admin-container" style="display: none;">
        <!-- Header -->
        <header class="admin-header">
            <div class="container">
                <div class="header-content">
                    <div class="admin-logo">
                        <img src="../logo.png" alt="Logo" class="admin-logo-img">
                        <div class="admin-logo-text">
                            <h2>Extra Miles Energy</h2>
                            <div class="subtitle">Product Management System</div>
                        </div>
                    </div>
                    
                    <div class="admin-actions">
                        <div class="user-info">
                            <div class="user-avatar">
                                <i class="fas fa-user-cog"></i>
                            </div>
                            <div>
                                <div style="font-weight: 600; font-size: 1.1rem;">Admin</div>
                                <div style="font-size: 0.85rem; color: var(--success);">
                                    <i class="fas fa-circle" style="font-size: 0.6rem;"></i> Online
                                </div>
                            </div>
                        </div>
                        
                        <button class="btn btn-outline btn-small" onclick="logout()">
                            <i class="fas fa-sign-out-alt"></i> Logout
                        </button>
                    </div>
                </div>
            </div>
        </header>
        
        <!-- Main Content -->
        <main class="admin-main">
            <div class="container">
                <!-- Tabs Navigation -->
                <div class="tabs-container">
                    <div class="tabs-header">
                        <button class="tab-btn active" onclick="showTab('dashboard')">
                            <i class="fas fa-tachometer-alt"></i> Dashboard
                        </button>
                        <button class="tab-btn" onclick="showTab('products')">
                            <i class="fas fa-box"></i> Products
                        </button>
                        <button class="tab-btn" onclick="showTab('addProduct')">
                            <i class="fas fa-plus-circle"></i> Add Product
                        </button>
                        <button class="tab-btn" onclick="showTab('sync')">
                            <i class="fas fa-sync-alt"></i> GitHub Sync
                        </button>
                        <button class="tab-btn" onclick="showTab('settings')">
                            <i class="fas fa-cog"></i> Settings
                        </button>
                    </div>
                    
                    <!-- Dashboard Tab -->
                    <div id="dashboard" class="tab-content active">
                        <h1 class="dashboard-title">Admin Dashboard</h1>
                        
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-icon">
                                    <i class="fas fa-box"></i>
                                </div>
                                <div class="stat-value" id="totalProducts">0</div>
                                <div class="stat-label">Total Products</div>
                            </div>
                            
                            <div class="stat-card">
                                <div class="stat-icon">
                                    <i class="fas fa-check-circle"></i>
                                </div>
                                <div class="stat-value" id="activeProducts">0</div>
                                <div class="stat-label">Active Products</div>
                            </div>
                            
                            <div class="stat-card">
                                <div class="stat-icon">
                                    <i class="fas fa-sync-alt"></i>
                                </div>
                                <div class="stat-value" id="lastSync">--</div>
                                <div class="stat-label">Last Sync</div>
                            </div>
                            
                            <div class="stat-card">
                                <div class="stat-icon">
                                    <i class="fas fa-database"></i>
                                </div>
                                <div class="stat-value" id="storageUsed">0 MB</div>
                                <div class="stat-label">Storage Used</div>
                            </div>
                        </div>
                        
                        <div class="form-container">
                            <h3 style="margin-top: 0; margin-bottom: 25px;">Quick Actions</h3>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 20px;">
                                <button class="btn btn-primary" onclick="showTab('addProduct')">
                                    <i class="fas fa-plus"></i> Add New Product
                                </button>
                                <button class="btn btn-success" onclick="syncWithGitHub()">
                                    <i class="fas fa-sync-alt"></i> Sync with GitHub
                                </button>
                                <button class="btn btn-warning" onclick="showTab('settings')">
                                    <i class="fas fa-cog"></i> Configure Settings
                                </button>
                                <a href="../" target="_blank" class="btn btn-outline">
                                    <i class="fas fa-external-link-alt"></i> View Website
                                </a>
                            </div>
                        </div>
                        
                        <div class="form-container">
                            <h3 style="margin-top: 0; margin-bottom: 25px;">Recent Activity</h3>
                            <div id="recentActivity" class="loading">
                                <div class="spinner"></div>
                                <div>Loading activity...</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Products Tab -->
                    <div id="products" class="tab-content">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; flex-wrap: wrap; gap: 20px;">
                            <h1 style="margin: 0;">Manage Products</h1>
                            <div style="display: flex; gap: 15px;">
                                <button class="btn btn-primary" onclick="showTab('addProduct')">
                                    <i class="fas fa-plus"></i> Add New Product
                                </button>
                                <button class="btn btn-outline" onclick="refreshProducts()">
                                    <i class="fas fa-redo"></i> Refresh
                                </button>
                            </div>
                        </div>
                        
                        <div class="form-container" style="margin-bottom: 25px;">
                            <div style="display: flex; gap: 15px; flex-wrap: wrap;">
                                <input type="text" 
                                       id="searchProducts" 
                                       class="form-input" 
                                       placeholder="Search products..." 
                                       style="flex: 1; min-width: 250px;"
                                       onkeyup="searchProducts()">
                                <select id="filterCategory" class="form-input" style="width: 200px;" onchange="filterProducts()">
                                    <option value="">All Categories</option>
                                    <option value="EV Battery">EV Battery</option>
                                    <option value="Solar Battery">Solar Battery</option>
                                    <option value="Custom Battery">Custom Battery</option>
                                    <option value="E-Rickshaw Battery">E-Rickshaw Battery</option>
                                </select>
                                <select id="filterStatus" class="form-input" style="width: 150px;" onchange="filterProducts()">
                                    <option value="">All Status</option>
                                    <option value="active">Active</option>
                                    <option value="draft">Draft</option>
                                </select>
                            </div>
                        </div>
                        
                        <div id="productsList" class="loading">
                            <div class="spinner"></div>
                            <div>Loading products...</div>
                        </div>
                    </div>
                    
                    <!-- Add Product Tab -->
                    <div id="addProduct" class="tab-content">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; flex-wrap: wrap; gap: 20px;">
                            <h1 style="margin: 0;">Add New Product</h1>
                            <button class="btn btn-outline" onclick="showTab('products')">
                                <i class="fas fa-arrow-left"></i> Back to Products
                            </button>
                        </div>
                        
                        <div class="form-container">
                            <div id="addProductMessage" class="message"></div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="productName" class="form-label">
                                        <i class="fas fa-tag"></i> Product Name *
                                    </label>
                                    <input type="text" 
                                           id="productName" 
                                           class="form-input" 
                                           placeholder="e.g., 60V 30Ah Lithium Battery"
                                           required>
                                </div>
                                
                                <div class="form-group">
                                    <label for="productVoltage" class="form-label">
                                        <i class="fas fa-bolt"></i> Voltage & Capacity *
                                    </label>
                                    <input type="text" 
                                           id="productVoltage" 
                                           class="form-input" 
                                           placeholder="e.g., 60V 30Ah (19S2P)"
                                           required>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="productCategory" class="form-label">
                                        <i class="fas fa-layer-group"></i> Category *
                                    </label>
                                    <select id="productCategory" class="form-input" required>
                                        <option value="">Select Category</option>
                                        <option value="EV Battery" selected>EV Battery</option>
                                        <option value="Solar Battery">Solar Battery</option>
                                        <option value="Custom Battery">Custom Battery</option>
                                        <option value="E-Rickshaw Battery">E-Rickshaw Battery</option>
                                        <option value="Scooter Battery">Scooter Battery</option>
                                        <option value="Inverter Battery">Inverter Battery</option>
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label for="productPrice" class="form-label">
                                        <i class="fas fa-rupee-sign"></i> Price Range
                                    </label>
                                    <input type="text" 
                                           id="productPrice" 
                                           class="form-input" 
                                           placeholder="e.g., ₹18,000 - ₹22,000">
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="productRange" class="form-label">
                                        <i class="fas fa-road"></i> Range (km)
                                    </label>
                                    <input type="text" 
                                           id="productRange" 
                                           class="form-input" 
                                           placeholder="e.g., 60-80 km">
                                </div>
                                
                                <div class="form-group">
                                    <label for="productStatus" class="form-label">
                                        <i class="fas fa-toggle-on"></i> Status *
                                    </label>
                                    <select id="productStatus" class="form-input" required>
                                        <option value="active" selected>Active</option>
                                        <option value="draft">Draft</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="productFeatures" class="form-label">
                                    <i class="fas fa-list-check"></i> Features (One per line) *
                                </label>
                                <textarea id="productFeatures" 
                                          class="form-input" 
                                          rows="4" 
                                          placeholder="LiFePO4 Cells&#10;3 Year Warranty&#10;JK Smart BMS&#10;Suitable for Electric Scooters"
                                          required></textarea>
                                <div style="margin-top: 8px; font-size: 0.85rem; color: var(--text-muted);">
                                    Each feature should be on a new line
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="productDescription" class="form-label">
                                    <i class="fas fa-align-left"></i> Description (Optional)
                                </label>
                                <textarea id="productDescription" 
                                          class="form-input" 
                                          rows="3" 
                                          placeholder="Detailed product description..."></textarea>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">
                                    <i class="fas fa-image"></i> Product Image *
                                </label>
                                <div class="file-upload" onclick="document.getElementById('productImage').click()" id="fileUploadArea">
                                    <div class="file-upload-icon">
                                        <i class="fas fa-cloud-upload-alt"></i>
                                    </div>
                                    <div class="file-upload-text">
                                        Click to upload product image
                                    </div>
                                    <div class="file-upload-hint">
                                        Recommended: 500x600px, PNG or JPG, Max 2MB
                                    </div>
                                    <input type="file" 
                                           id="productImage" 
                                           class="file-input" 
                                           accept="image/*"
                                           required
                                           onchange="previewImage(event)">
                                </div>
                                <div class="image-preview" id="imagePreview">
                                    <!-- Preview will appear here -->
                                </div>
                            </div>
                            
                            <div style="display: flex; gap: 20px; margin-top: 40px; flex-wrap: wrap;">
                                <button class="btn btn-primary btn-large" onclick="saveProduct()" style="flex: 1;">
                                    <i class="fas fa-save"></i> Save Product to GitHub
                                </button>
                                <button class="btn btn-outline btn-large" onclick="clearForm()" style="flex: 1;">
                                    <i class="fas fa-times"></i> Clear Form
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- GitHub Sync Tab -->
                    <div id="sync" class="tab-content">
                        <h1 class="dashboard-title">GitHub Sync</h1>
                        
                        <div class="form-container">
                            <h3 style="margin-top: 0; margin-bottom: 25px;">
                                <i class="fab fa-github"></i> Sync Products with GitHub
                            </h3>
                            
                            <div style="margin-bottom: 30px;">
                                <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 20px;">
                                    <div style="width: 12px; height: 12px; border-radius: 50%; background: var(--success);"></div>
                                    <div style="flex: 1;">
                                        <div style="font-weight: 600; margin-bottom: 5px;">Sync Status</div>
                                        <div style="color: var(--text-muted); font-size: 0.95rem;" id="syncStatus">
                                            Ready to sync
                                        </div>
                                    </div>
                                </div>
                                
                                <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 20px;">
                                    <div style="width: 12px; height: 12px; border-radius: 50%; background: var(--accent);"></div>
                                    <div style="flex: 1;">
                                        <div style="font-weight: 600; margin-bottom: 5px;">GitHub Repository</div>
                                        <div style="color: var(--text-muted); font-size: 0.95rem;" id="githubRepo">
                                            parshantsaharan/extramilesenergy.in
                                        </div>
                                    </div>
                                </div>
                                
                                <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 30px;">
                                    <div style="width: 12px; height: 12px; border-radius: 50%; background: var(--warning);"></div>
                                    <div style="flex: 1;">
                                        <div style="font-weight: 600; margin-bottom: 5px;">Last Sync</div>
                                        <div style="color: var(--text-muted); font-size: 0.95rem;" id="lastSyncTime">
                                            Never
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="progress-container" style="display: none;" id="syncProgress">
                                <div class="progress-bar">
                                    <div class="progress-fill" id="progressFill"></div>
                                </div>
                                <div class="progress-text">
                                    <span>Syncing...</span>
                                    <span id="progressPercent">0%</span>
                                </div>
                            </div>
                            
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-top: 30px;">
                                <button class="btn btn-success" onclick="syncWithGitHub()" id="syncButton">
                                    <i class="fas fa-sync-alt"></i> Sync Now
                                </button>
                                <button class="btn btn-primary" onclick="pullFromGitHub()">
                                    <i class="fas fa-download"></i> Pull from GitHub
                                </button>
                                <button class="btn btn-outline" onclick="testGitHubConnection()">
                                    <i class="fas fa-plug"></i> Test Connection
                                </button>
                                <button class="btn btn-warning" onclick="showTab('settings')">
                                    <i class="fas fa-cog"></i> Configure
                                </button>
                            </div>
                        </div>
                        
                        <div class="form-container">
                            <h3 style="margin-top: 0; margin-bottom: 25px;">Sync Log</h3>
                            <div style="background: rgba(0,0,0,0.2); border-radius: var(--radius-sm); padding: 20px; min-height: 150px; max-height: 300px; overflow-y: auto;">
                                <div id="syncLog">
                                    <div style="color: var(--text-muted); text-align: center; padding: 40px 20px;">
                                        <i class="fas fa-history" style="font-size: 2rem; margin-bottom: 15px; opacity: 0.5; display: block;"></i>
                                        No sync activity yet
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Settings Tab -->
                    <div id="settings" class="tab-content">
                        <h1 class="dashboard-title">Settings</h1>
                        
                        <div class="form-container">
                            <h3 style="margin-top: 0; margin-bottom: 25px;">
                                <i class="fab fa-github"></i> GitHub Configuration
                            </h3>
                            
                            <div class="form-group">
                                <label for="githubToken" class="form-label">
                                    <i class="fas fa-key"></i> GitHub Personal Access Token *
                                </label>
                                <input type="password" 
                                       id="githubToken" 
                                       class="form-input" 
                                       placeholder="Enter your GitHub Personal Access Token"
                                       required>
                                <div style="margin-top: 10px; font-size: 0.9rem; color: var(--text-muted); line-height: 1.5;">
                                    <i class="fas fa-info-circle"></i> 
                                    Create token at: <br>
                                    GitHub → Settings → Developer Settings → Personal Access Tokens → Generate new token<br>
                                    Required permissions: <code>repo</code> (full control), <code>write:packages</code>, <code>delete:packages</code>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="githubUsername" class="form-label">
                                        <i class="fas fa-user"></i> GitHub Username *
                                    </label>
                                    <input type="text" 
                                           id="githubUsername" 
                                           class="form-input" 
                                           value="parshantsaharan"
                                           required>
                                </div>
                                
                                <div class="form-group">
                                    <label for="githubRepo" class="form-label">
                                        <i class="fas fa-code-branch"></i> Repository Name *
                                    </label>
                                    <input type="text" 
                                           id="githubRepo" 
                                           class="form-input" 
                                           value="extramilesenergy.in"
                                           required>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="githubBranch" class="form-label">
                                        <i class="fas fa-code-fork"></i> Branch Name *
                                    </label>
                                    <input type="text" 
                                           id="githubBranch" 
                                           class="form-input" 
                                           value="main"
                                           required>
                                </div>
                                
                                <div class="form-group">
                                    <label for="productsPath" class="form-label">
                                        <i class="fas fa-folder"></i> Products Path *
                                    </label>
                                    <input type="text" 
                                           id="productsPath" 
                                           class="form-input" 
                                           value="content/products"
                                           required>
                                </div>
                            </div>
                            
                            <div style="display: flex; gap: 20px; margin-top: 30px; flex-wrap: wrap;">
                                <button class="btn btn-primary" onclick="saveSettings()">
                                    <i class="fas fa-save"></i> Save Settings
                                </button>
                                <button class="btn btn-success" onclick="testGitHubConnection()">
                                    <i class="fas fa-plug"></i> Test Connection
                                </button>
                                <button class="btn btn-outline" onclick="loadSettings()">
                                    <i class="fas fa-redo"></i> Reload
                                </button>
                            </div>
                        </div>
                        
                        <div class="form-container">
                            <h3 style="margin-top: 0; margin-bottom: 25px;">Website Settings</h3>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="adminPassword" class="form-label">
                                        <i class="fas fa-lock"></i> Admin Password *
                                    </label>
                                    <input type="password" 
                                           id="adminPassword" 
                                           class="form-input" 
                                           value="Sky12345"
                                           required>
                                </div>
                                
                                <div class="form-group">
                                    <label for="whatsappNumber" class="form-label">
                                        <i class="fab fa-whatsapp"></i> WhatsApp Number *
                                    </label>
                                    <input type="text" 
                                           id="whatsappNumber" 
                                           class="form-input" 
                                           value="917876555055"
                                           required>
                                </div>
                            </div>
                            
                            <div style="margin-top: 30px;">
                                <button class="btn btn-primary" onclick="saveWebsiteSettings()">
                                    <i class="fas fa-save"></i> Save Website Settings
                                </button>
                            </div>
                        </div>
                        
                        <div class="form-container">
                            <h3 style="margin-top: 0; margin-bottom: 25px; color: var(--danger);">
                                <i class="fas fa-exclamation-triangle"></i> Danger Zone
                            </h3>
                            <div style="padding: 25px; border: 2px solid var(--danger); border-radius: var(--radius); background: rgba(255, 53, 112, 0.05);">
                                <div style="color: var(--danger); margin-bottom: 20px; font-size: 1.1rem;">
                                    <i class="fas fa-exclamation-circle"></i> 
                                    Warning: These actions cannot be undone
                                </div>
                                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                                    <button class="btn btn-danger" onclick="confirmAction('clearLocalStorage', 'Clear all local data?')">
                                        <i class="fas fa-trash"></i> Clear Local Data
                                    </button>
                                    <button class="btn btn-danger" onclick="confirmAction('resetSettings', 'Reset all settings to default?')">
                                        <i class="fas fa-redo"></i> Reset Settings
                                    </button>
                                    <button class="btn btn-danger" onclick="confirmAction('deleteAllProducts', 'Delete ALL products from GitHub?')">
                                        <i class="fas fa-bomb"></i> Delete All Products
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
    
    <!-- Notification -->
    <div class="notification" id="notification"></div>
    
    <!-- Confirmation Modal -->
    <div class="modal" id="confirmationModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="modalTitle">Confirm Action</h3>
                <button class="modal-close" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-body" id="modalBody">
                Are you sure you want to perform this action?
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" onclick="closeModal()">Cancel</button>
                <button class="btn btn-danger" onclick="executeConfirmedAction()">Confirm</button>
            </div>
        </div>
    </div>

    <!-- Main JavaScript -->
    <script>
        // ===== CONFIGURATION =====
        const ADMIN_PASSWORD = 'Sky12345'; // Default password
        
        // ===== STATE MANAGEMENT =====
        let currentUser = null;
        let products = [];
        let settings = {};
        let pendingAction = null;
        let editingProductIndex = -1;
        let githubConfig = {};
        
        // ===== INITIALIZATION =====
        document.addEventListener('DOMContentLoaded', function() {
            // Check if already logged in
            const token = localStorage.getItem('admin_token');
            if (token === ADMIN_PASSWORD) {
                showAdminDashboard();
            } else {
                showLoginPage();
            }
            
            // Load settings
            loadSettings();
            
            // Initialize GitHub config
            initGitHubConfig();
        });
        
        // ===== AUTHENTICATION =====
        function login() {
            const password = document.getElementById('password').value;
            const messageDiv = document.getElementById('loginMessage');
            
            if (!password) {
                showMessage(messageDiv, 'Please enter password', 'error');
                return;
            }
            
            // Check password (you can change this to your preferred password)
            const validPasswords = [ADMIN_PASSWORD, 'Sky12345', 'admin123'];
            
            if (validPasswords.includes(password)) {
                // Save token
                localStorage.setItem('admin_token', password);
                showAdminDashboard();
                showNotification('Login successful! Welcome to Admin Panel.', 'success');
            } else {
                showMessage(messageDiv, 'Incorrect password. Please try again.', 'error');
                document.getElementById('password').value = '';
                document.getElementById('password').focus();
            }
        }
        
        function logout() {
            localStorage.removeItem('admin_token');
            showLoginPage();
            showNotification('Logged out successfully.', 'info');
        }
        
        function showLoginPage() {
            document.getElementById('loginPage').style.display = 'flex';
            document.getElementById('adminDashboard').style.display = 'none';
        }
        
        function showAdminDashboard() {
            document.getElementById('loginPage').style.display = 'none';
            document.getElementById('adminDashboard').style.display = 'block';
            loadDashboard();
        }
        
        // ===== DASHBOARD FUNCTIONS =====
        function loadDashboard() {
            loadProducts();
            updateStats();
            loadRecentActivity();
        }
        
        function showTab(tabId) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Remove active class from tab buttons
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Show selected tab
            document.getElementById(tabId).classList.add('active');
            
            // Activate corresponding tab button
            document.querySelectorAll('.tab-btn').forEach(btn => {
                if (btn.textContent.includes(tabId.charAt(0).toUpperCase() + tabId.slice(1)) || 
                    btn.onclick.toString().includes(tabId)) {
                    btn.classList.add('active');
                }
            });
            
            // Load data for tab
            switch(tabId) {
                case 'products':
                    loadProductsList();
                    break;
                case 'sync':
                    updateSyncStatus();
                    break;
                case 'settings':
                    loadSettingsForm();
                    break;
            }
        }
        
        // ===== PRODUCT MANAGEMENT =====
        async function loadProducts() {
            try {
                // Try to load from localStorage first
                const storedProducts = localStorage.getItem('extra_miles_products');
                products = storedProducts ? JSON.parse(storedProducts) : [];
                
                // Try to load from GitHub if configured
                if (githubConfig.token && githubConfig.token !== 'YOUR_GITHUB_PERSONAL_ACCESS_TOKEN') {
                    await pullProductsFromGitHub();
                }
                
                updateStats();
                return products;
            } catch (error) {
                console.error('Error loading products:', error);
                showNotification('Error loading products: ' + error.message, 'error');
                return products;
            }
        }
        
        async function loadProductsList() {
            const container = document.getElementById('productsList');
            container.innerHTML = '<div class="loading"><div class="spinner"></div><div>Loading products...</div></div>';
            
            await loadProducts();
            
            if (products.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">
                            <i class="fas fa-box-open"></i>
                        </div>
                        <h3 class="empty-state-title">No Products Found</h3>
                        <p class="empty-state-description">
                            You haven't added any products yet. Start by adding your first product.
                        </p>
                        <button class="btn btn-primary" onclick="showTab('addProduct')">
                            <i class="fas fa-plus"></i> Add First Product
                        </button>
                    </div>
                `;
                return;
            }
            
            let html = '<div class="products-grid">';
            
            products.forEach((product, index) => {
                const imageUrl = product.image || '../placeholder.png';
                const statusClass = product.status === 'active' ? 'status-active' : 'status-draft';
                const statusText = product.status === 'active' ? 'Active' : 'Draft';
                
                html += `
                    <div class="product-admin-card">
                        <div class="product-status ${statusClass}">${statusText}</div>
                        
                        <img src="${imageUrl}" 
                             alt="${product.name}" 
                             class="product-admin-image"
                             onerror="this.src='../placeholder.png'">
                        
                        <h3 class="product-admin-title">${product.name}</h3>
                        <div class="product-admin-specs">${product.voltage || ''}</div>
                        <div class="product-admin-category">${product.category || 'EV Battery'}</div>
                        
                        <ul class="product-admin-features">
                            ${(product.features || []).slice(0, 3).map(feature => `<li>${feature}</li>`).join('')}
                            ${(product.features || []).length > 3 ? '<li>...</li>' : ''}
                        </ul>
                        
                        <div class="product-admin-actions">
                            <button class="btn btn-primary btn-small" onclick="editProduct(${index})">
                                <i class="fas fa-edit"></i> Edit
                            </button>
                            <button class="btn btn-danger btn-small" onclick="deleteProduct(${index})">
                                <i class="fas fa-trash"></i> Delete
                            </button>
                        </div>
                    </div>
                `;
            });
            
            html += '</div>';
            container.innerHTML = html;
        }
        
        function refreshProducts() {
            loadProductsList();
            showNotification('Products list refreshed', 'success');
        }
        
        function searchProducts() {
            const searchTerm = document.getElementById('searchProducts').value.toLowerCase();
            const category = document.getElementById('filterCategory').value;
            const status = document.getElementById('filterStatus').value;
            
            const filteredProducts = products.filter(product => {
                const matchesSearch = product.name.toLowerCase().includes(searchTerm) || 
                                     (product.voltage && product.voltage.toLowerCase().includes(searchTerm));
                const matchesCategory = !category || product.category === category;
                const matchesStatus = !status || product.status === status;
                
                return matchesSearch && matchesCategory && matchesStatus;
            });
            
            displayFilteredProducts(filteredProducts);
        }
        
        function filterProducts() {
            searchProducts();
        }
        
        function displayFilteredProducts(filteredProducts) {
            const container = document.getElementById('productsList');
            
            if (filteredProducts.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">
                            <i class="fas fa-search"></i>
                        </div>
                        <h3 class="empty-state-title">No Products Found</h3>
                        <p class="empty-state-description">
                            No products match your search criteria. Try different filters.
                        </p>
                    </div>
                `;
                return;
            }
            
            let html = '<div class="products-grid">';
            
            filteredProducts.forEach((product, index) => {
                const originalIndex = products.findIndex(p => p.id === product.id);
                const imageUrl = product.image || '../placeholder.png';
                const statusClass = product.status === 'active' ? 'status-active' : 'status-draft';
                const statusText = product.status === 'active' ? 'Active' : 'Draft';
                
                html += `
                    <div class="product-admin-card">
                        <div class="product-status ${statusClass}">${statusText}</div>
                        
                        <img src="${imageUrl}" 
                             alt="${product.name}" 
                             class="product-admin-image"
                             onerror="this.src='../placeholder.png'">
                        
                        <h3 class="product-admin-title">${product.name}</h3>
                        <div class="product-admin-specs">${product.voltage || ''}</div>
                        <div class="product-admin-category">${product.category || 'EV Battery'}</div>
                        
                        <ul class="product-admin-features">
                            ${(product.features || []).slice(0, 3).map(feature => `<li>${feature}</li>`).join('')}
                            ${(product.features || []).length > 3 ? '<li>...</li>' : ''}
                        </ul>
                        
                        <div class="product-admin-actions">
                            <button class="btn btn-primary btn-small" onclick="editProduct(${originalIndex})">
                                <i class="fas fa-edit"></i> Edit
                            </button>
                            <button class="btn btn-danger btn-small" onclick="deleteProduct(${originalIndex})">
                                <i class="fas fa-trash"></i> Delete
                            </button>
                        </div>
                    </div>
                `;
            });
            
            html += '</div>';
            container.innerHTML = html;
        }
        
        function previewImage(event) {
            const file = event.target.files[0];
            const previewDiv = document.getElementById('imagePreview');
            const fileUploadArea = document.getElementById('fileUploadArea');
            
            if (file) {
                // Validate file size (max 2MB)
                if (file.size > 2 * 1024 * 1024) {
                    showNotification('Image size should be less than 2MB', 'error');
                    event.target.value = '';
                    return;
                }
                
                // Validate file type
                const validTypes = ['image/jpeg', 'image/jpg', 'image/png', 'image/webp'];
                if (!validTypes.includes(file.type)) {
                    showNotification('Please upload JPG, PNG or WebP image only', 'error');
                    event.target.value = '';
                    return;
                }
                
                const reader = new FileReader();
                reader.onload = function(e) {
                    previewDiv.innerHTML = `
                        <img src="${e.target.result}" class="preview-image" alt="Preview">
                        <div class="preview-info">
                            ${file.name} (${(file.size / 1024).toFixed(1)} KB)
                        </div>
                        <button class="btn btn-outline btn-small" onclick="clearImagePreview()">
                            <i class="fas fa-times"></i> Remove Image
                        </button>
                    `;
                    
                    // Change file upload area style
                    fileUploadArea.style.borderColor = 'var(--success)';
                    fileUploadArea.style.background = 'rgba(69, 255, 144, 0.05)';
                };
                reader.readAsDataURL(file);
            }
        }
        
        function clearImagePreview() {
            document.getElementById('imagePreview').innerHTML = '';
            document.getElementById('productImage').value = '';
            document.getElementById('fileUploadArea').style.borderColor = '';
            document.getElementById('fileUploadArea').style.background = '';
        }
        
        function clearForm() {
            document.getElementById('productName').value = '';
            document.getElementById('productVoltage').value = '';
            document.getElementById('productCategory').value = 'EV Battery';
            document.getElementById('productPrice').value = '';
            document.getElementById('productRange').value = '';
            document.getElementById('productStatus').value = 'active';
            document.getElementById('productFeatures').value = '';
            document.getElementById('productDescription').value = '';
            clearImagePreview();
            editingProductIndex = -1;
            
            // Update button text
            const saveBtn = document.querySelector('#addProduct .btn-primary');
            saveBtn.innerHTML = '<i class="fas fa-save"></i> Save Product to GitHub';
            saveBtn.onclick = function() { saveProduct(); };
            
            showMessage(document.getElementById('addProductMessage'), 'Form cleared successfully', 'success');
        }
        
        async function saveProduct() {
            const name = document.getElementById('productName').value.trim();
            const voltage = document.getElementById('productVoltage').value.trim();
            const category = document.getElementById('productCategory').value;
            const price = document.getElementById('productPrice').value.trim();
            const range = document.getElementById('productRange').value.trim();
            const status = document.getElementById('productStatus').value;
            const features = document.getElementById('productFeatures').value
                .split('\n')
                .map(f => f.trim())
                .filter(f => f !== '');
            const description = document.getElementById('productDescription').value.trim();
            const imageFile = document.getElementById('productImage').files[0];
            
            const messageDiv = document.getElementById('addProductMessage');
            
            // Validation
            if (!name || !voltage || !category || features.length === 0) {
                showMessage(messageDiv, 'Please fill all required fields (Name, Voltage, Category, Features)', 'error');
                return;
            }
            
            if (!imageFile && editingProductIndex === -1) {
                showMessage(messageDiv, 'Please upload a product image for new products', 'error');
                return;
            }
            
            // Generate unique ID
            const productId = editingProductIndex === -1 ? 
                'product-' + Date.now() + '-' + Math.random().toString(36).substr(2, 9) : 
                products[editingProductIndex].id;
            
            // Create product object
            const product = {
                id: productId,
                name,
                voltage,
                category,
                price: price || null,
                range: range || null,
                status,
                features,
                description: description || null,
                image: imageFile ? `../uploads/${imageFile.name}` : (products[editingProductIndex]?.image || ''),
                createdAt: editingProductIndex === -1 ? new Date().toISOString() : (products[editingProductIndex]?.createdAt || new Date().toISOString()),
                updatedAt: new Date().toISOString()
            };
            
            try {
                showNotification('Saving product...', 'info');
                
                // Save to localStorage
                if (editingProductIndex === -1) {
                    products.push(product);
                } else {
                    products[editingProductIndex] = product;
                }
                localStorage.setItem('extra_miles_products', JSON.stringify(products));
                
                // Save to GitHub if configured
                if (githubConfig.token && githubConfig.token !== 'YOUR_GITHUB_PERSONAL_ACCESS_TOKEN') {
                    if (imageFile) {
                        await uploadImageToGitHub(imageFile);
                    }
                    await saveProductToGitHub(product);
                    
                    showMessage(messageDiv, 'Product saved successfully and synced with GitHub!', 'success');
                    showNotification('Product saved and synced with GitHub!', 'success');
                } else {
                    showMessage(messageDiv, 'Product saved locally. Configure GitHub token in Settings for automatic sync.', 'warning');
                    showNotification('Product saved locally. GitHub sync not configured.', 'warning');
                }
                
                // Clear form
                clearForm();
                
                // Update stats and products list
                updateStats();
                loadProductsList();
                
                // Switch to products tab after delay
                setTimeout(() => {
                    showTab('products');
                }, 2000);
                
            } catch (error) {
                console.error('Error saving product:', error);
                showMessage(messageDiv, 'Error saving product: ' + error.message, 'error');
                showNotification('Error saving product: ' + error.message, 'error');
            }
        }
        
        function editProduct(index) {
            const product = products[index];
            editingProductIndex = index;
            
            // Fill form with product data
            document.getElementById('productName').value = product.name;
            document.getElementById('productVoltage').value = product.voltage || '';
            document.getElementById('productCategory').value = product.category || 'EV Battery';
            document.getElementById('productPrice').value = product.price || '';
            document.getElementById('productRange').value = product.range || '';
            document.getElementById('productStatus').value = product.status || 'active';
            document.getElementById('productFeatures').value = (product.features || []).join('\n');
            document.getElementById('productDescription').value = product.description || '';
            
            // Show existing image preview
            if (product.image) {
                const previewDiv = document.getElementById('imagePreview');
                previewDiv.innerHTML = `
                    <img src="${product.image}" class="preview-image" alt="Preview" onerror="this.src='../placeholder.png'">
                    <div class="preview-info">
                        Existing image (upload new image to replace)
                    </div>
                    <button class="btn btn-outline btn-small" onclick="clearImagePreview()">
                        <i class="fas fa-times"></i> Remove Image
                    </button>
                `;
            }
            
            // Update save button
            const saveBtn = document.querySelector('#addProduct .btn-primary');
            saveBtn.innerHTML = '<i class="fas fa-save"></i> Update Product';
            saveBtn.onclick = function() { saveProduct(); };
            
            // Switch to add product tab
            showTab('addProduct');
            showNotification('Editing product: ' + product.name, 'info');
        }
        
        function deleteProduct(index) {
            const product = products[index];
            
            confirmAction('deleteProduct', `Are you sure you want to delete "${product.name}"?`, function() {
                // Remove from local storage
                products.splice(index, 1);
                localStorage.setItem('extra_miles_products', JSON.stringify(products));
                
                // Try to delete from GitHub
                if (githubConfig.token && githubConfig.token !== 'YOUR_GITHUB_PERSONAL_ACCESS_TOKEN') {
                    deleteProductFromGitHub(product.id);
                }
                
                // Update UI
                loadProductsList();
                updateStats();
                showNotification('Product deleted successfully', 'success');
            });
        }
        
        // ===== GITHUB SYNC FUNCTIONS =====
        function initGitHubConfig() {
            // Load GitHub config from localStorage
            const savedConfig = localStorage.getItem('github_config');
            if (savedConfig) {
                githubConfig = JSON.parse(savedConfig);
            } else {
                // Default config
                githubConfig = {
                    token: '',
                    username: 'parshantsaharan',
                    repo: 'extramilesenergy.in',
                    branch: 'main',
                    productsPath: 'content/products'
                };
            }
        }
        
        async function syncWithGitHub() {
            if (!githubConfig.token || githubConfig.token === 'YOUR_GITHUB_PERSONAL_ACCESS_TOKEN') {
                showNotification('Please configure GitHub token in Settings first', 'error');
                showTab('settings');
                return;
            }
            
            try {
                // Show progress
                const syncButton = document.getElementById('syncButton');
                const syncProgress = document.getElementById('syncProgress');
                const progressFill = document.getElementById('progressFill');
                const progressPercent = document.getElementById('progressPercent');
                const syncStatus = document.getElementById('syncStatus');
                
                syncButton.disabled = true;
                syncButton.innerHTML = '<i class="fas fa-sync-alt fa-spin"></i> Syncing...';
                syncProgress.style.display = 'block';
                syncStatus.innerHTML = 'Syncing with GitHub...';
                addSyncLog('Starting sync with GitHub...', 'info');
                
                // Step 1: Upload images (10%)
                progressFill.style.width = '10%';
                progressPercent.textContent = '10%';
                addSyncLog('Uploading product images...', 'info');
                
                // Step 2: Upload product JSON files (50%)
                progressFill.style.width = '50%';
                progressPercent.textContent = '50%';
                addSyncLog('Uploading product data...', 'info');
                
                // Save each product to GitHub
                for (let i = 0; i < products.length; i++) {
                    const product = products[i];
                    await saveProductToGitHub(product);
                    
                    // Update progress
                    const progress = 50 + (i / products.length) * 40;
                    progressFill.style.width = progress + '%';
                    progressPercent.textContent = Math.round(progress) + '%';
                }
                
                // Step 3: Update main website (90%)
                progressFill.style.width = '90%';
                progressPercent.textContent = '90%';
                addSyncLog('Updating website...', 'info');
                
                // Step 4: Complete (100%)
                progressFill.style.width = '100%';
                progressPercent.textContent = '100%';
                addSyncLog('Sync completed successfully!', 'success');
                
                // Update last sync time
                const now = new Date();
                document.getElementById('lastSyncTime').textContent = now.toLocaleString();
                document.getElementById('lastSync').textContent = 'Just now';
                syncStatus.innerHTML = 'Sync completed successfully';
                
                // Save last sync time
                localStorage.setItem('last_sync_time', now.toISOString());
                
                showNotification('Successfully synced with GitHub!', 'success');
                
            } catch (error) {
                console.error('Error syncing with GitHub:', error);
                addSyncLog('Sync failed: ' + error.message, 'error');
                showNotification('Error syncing with GitHub: ' + error.message, 'error');
            } finally {
                // Reset UI
                const syncButton = document.getElementById('syncButton');
                const syncProgress = document.getElementById('syncProgress');
                
                setTimeout(() => {
                    syncButton.disabled = false;
                    syncButton.innerHTML = '<i class="fas fa-sync-alt"></i> Sync Now';
                    syncProgress.style.display = 'none';
                    document.getElementById('progressFill').style.width = '0%';
                    document.getElementById('progressPercent').textContent = '0%';
                }, 2000);
            }
        }
        
        async function saveProductToGitHub(product) {
            // This is a simplified implementation
            // In production, you would use the GitHub API
            
            const fileName = `${product.id}.json`;
            const filePath = `${githubConfig.productsPath}/${fileName}`;
            const content = JSON.stringify(product, null, 2);
            
            try {
                // Create JSON file
                const response = await fetch(`https://api.github.com/repos/${githubConfig.username}/${githubConfig.repo}/contents/${filePath}`, {
                    method: 'PUT',
                    headers: {
                        'Authorization': `token ${githubConfig.token}`,
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        message: `Add/Update product: ${product.name}`,
                        content: btoa(unescape(encodeURIComponent(content))),
                        branch: githubConfig.branch
                    })
                });
                
                if (!response.ok) {
                    throw new Error(`GitHub API error: ${response.status}`);
                }
                
                addSyncLog(`Saved product: ${product.name}`, 'success');
                return true;
                
            } catch (error) {
                console.error('Error saving to GitHub:', error);
                addSyncLog(`Failed to save product: ${product.name} - ${error.message}`, 'error');
                throw error;
            }
        }
        
        async function uploadImageToGitHub(imageFile) {
            const fileName = imageFile.name;
            const filePath = `uploads/${fileName}`;
            
            try {
                // Convert image to base64
                const reader = new FileReader();
                return new Promise((resolve, reject) => {
                    reader.onload = async function(e) {
                        const base64Content = e.target.result.split(',')[1];
                        
                        const response = await fetch(`https://api.github.com/repos/${githubConfig.username}/${githubConfig.repo}/contents/${filePath}`, {
                            method: 'PUT',
                            headers: {
                                'Authorization': `token ${githubConfig.token}`,
                                'Content-Type': 'application/json',
                            },
                            body: JSON.stringify({
                                message: `Upload image: ${fileName}`,
                                content: base64Content,
                                branch: githubConfig.branch
                            })
                        });
                        
                        if (!response.ok) {
                            reject(new Error(`GitHub API error: ${response.status}`));
                        } else {
                            addSyncLog(`Uploaded image: ${fileName}`, 'success');
                            resolve(true);
                        }
                    };
                    reader.readAsDataURL(imageFile);
                });
                
            } catch (error) {
                console.error('Error uploading image:', error);
                addSyncLog(`Failed to upload image: ${fileName} - ${error.message}`, 'error');
                throw error;
            }
        }
        
        async function pullFromGitHub() {
            if (!githubConfig.token || githubConfig.token === 'YOUR_GITHUB_PERSONAL_ACCESS_TOKEN') {
                showNotification('Please configure GitHub token first', 'error');
                return;
            }
            
            try {
                showNotification('Pulling products from GitHub...', 'info');
                addSyncLog('Pulling products from GitHub...', 'info');
                
                // Fetch products from GitHub
                const response = await fetch(`https://api.github.com/repos/${githubConfig.username}/${githubConfig.repo}/contents/${githubConfig.productsPath}`, {
                    headers: {
                        'Authorization': `token ${githubConfig.token}`
                    }
                });
                
                if (!response.ok) {
                    throw new Error(`GitHub API error: ${response.status}`);
                }
                
                const files = await response.json();
                const jsonFiles = files.filter(file => file.name.endsWith('.json'));
                
                // Clear existing products
                products = [];
                
                // Load each product
                for (const file of jsonFiles) {
                    const productResponse = await fetch(file.download_url);
                    const product = await productResponse.json();
                    products.push(product);
                }
                
                // Save to localStorage
                localStorage.setItem('extra_miles_products', JSON.stringify(products));
                
                // Update UI
                loadProductsList();
                updateStats();
                
                addSyncLog(`Successfully pulled ${products.length} products from GitHub`, 'success');
                showNotification(`Successfully loaded ${products.length} products from GitHub`, 'success');
                
            } catch (error) {
                console.error('Error pulling from GitHub:', error);
                addSyncLog('Failed to pull from GitHub: ' + error.message, 'error');
                showNotification('Error pulling from GitHub: ' + error.message, 'error');
            }
        }
        
        async function pullProductsFromGitHub() {
            // Similar to pullFromGitHub but without UI updates
            try {
                const response = await fetch(`https://api.github.com/repos/${githubConfig.username}/${githubConfig.repo}/contents/${githubConfig.productsPath}`, {
                    headers: {
                        'Authorization': `token ${githubConfig.token}`
                    }
                });
                
                if (response.ok) {
                    const files = await response.json();
                    const jsonFiles = files.filter(file => file.name.endsWith('.json'));
                    
                    const githubProducts = [];
                    for (const file of jsonFiles) {
                        const productResponse = await fetch(file.download_url);
                        const product = await productResponse.json();
                        githubProducts.push(product);
                    }
                    
                    // Merge with local products (GitHub overrides local)
                    products = [...githubProducts];
                    localStorage.setItem('extra_miles_products', JSON.stringify(products));
                    
                    return true;
                }
            } catch (error) {
                console.error('Error pulling products from GitHub:', error);
            }
            return false;
        }
        
        async function deleteProductFromGitHub(productId) {
            try {
                const fileName = `${productId}.json`;
                const filePath = `${githubConfig.productsPath}/${fileName}`;
                
                // First, get the file SHA
                const getResponse = await fetch(`https://api.github.com/repos/${githubConfig.username}/${githubConfig.repo}/contents/${filePath}`, {
                    headers: {
                        'Authorization': `token ${githubConfig.token}`
                    }
                });
                
                if (getResponse.ok) {
                    const fileData = await getResponse.json();
                    const sha = fileData.sha;
                    
                    // Delete the file
                    const deleteResponse = await fetch(`https://api.github.com/repos/${githubConfig.username}/${githubConfig.repo}/contents/${filePath}`, {
                        method: 'DELETE',
                        headers: {
                            'Authorization': `token ${githubConfig.token}`,
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            message: `Delete product: ${productId}`,
                            sha: sha,
                            branch: githubConfig.branch
                        })
                    });
                    
                    if (deleteResponse.ok) {
                        addSyncLog(`Deleted product from GitHub: ${productId}`, 'success');
                        return true;
                    }
                }
            } catch (error) {
                console.error('Error deleting from GitHub:', error);
                addSyncLog(`Failed to delete product from GitHub: ${error.message}`, 'error');
            }
            return false;
        }
        
        async function testGitHubConnection() {
            if (!githubConfig.token || githubConfig.token === 'YOUR_GITHUB_PERSONAL_ACCESS_TOKEN') {
                showNotification('Please enter your GitHub token first', 'error');
                return;
            }
            
            try {
                showNotification('Testing GitHub connection...', 'info');
                
                const response = await fetch(`https://api.github.com/repos/${githubConfig.username}/${githubConfig.repo}`, {
                    headers: {
                        'Authorization': `token ${githubConfig.token}`
                    }
                });
                
                if (response.ok) {
                    showNotification('GitHub connection successful!', 'success');
                    addSyncLog('GitHub connection test: SUCCESS', 'success');
                } else {
                    throw new Error(`GitHub API error: ${response.status}`);
                }
            } catch (error) {
                console.error('GitHub connection error:', error);
                showNotification('GitHub connection failed: ' + error.message, 'error');
                addSyncLog('GitHub connection test: FAILED - ' + error.message, 'error');
            }
        }
        
        function updateSyncStatus() {
            const lastSync = localStorage.getItem('last_sync_time');
            if (lastSync) {
                const lastSyncDate = new Date(lastSync);
                document.getElementById('lastSyncTime').textContent = lastSyncDate.toLocaleString();
                document.getElementById('lastSync').textContent = formatTimeAgo(lastSyncDate);
            }
            
            // Update GitHub repo info
            document.getElementById('githubRepo').textContent = `${githubConfig.username}/${githubConfig.repo}`;
        }
        
        function addSyncLog(message, type = 'info') {
            const logContainer = document.getElementById('syncLog');
            const time = new Date().toLocaleTimeString();
            const typeClass = type === 'success' ? 'var(--success)' : 
                            type === 'error' ? 'var(--danger)' : 'var(--accent)';
            
            const logEntry = document.createElement('div');
            logEntry.style.marginBottom = '10px';
            logEntry.style.paddingBottom = '10px';
            logEntry.style.borderBottom = '1px solid rgba(255,255,255,0.1)';
            logEntry.innerHTML = `
                <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                    <span style="color: ${typeClass}; font-weight: 500;">
                        <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : 'info-circle'}"></i>
                        ${message}
                    </span>
                    <span style="color: var(--text-muted); font-size: 0.85rem;">${time}</span>
                </div>
            `;
            
            logContainer.insertBefore(logEntry, logContainer.firstChild);
            
            // Keep only last 20 logs
            const logs = logContainer.querySelectorAll('div');
            if (logs.length > 20) {
                logContainer.removeChild(logs[logs.length - 1]);
            }
        }
        
        // ===== SETTINGS FUNCTIONS =====
        function loadSettingsForm() {
            // Load GitHub settings
            document.getElementById('githubToken').value = githubConfig.token || '';
            document.getElementById('githubUsername').value = githubConfig.username || 'parshantsaharan';
            document.getElementById('githubRepo').value = githubConfig.repo || 'extramilesenergy.in';
            document.getElementById('githubBranch').value = githubConfig.branch || 'main';
            document.getElementById('productsPath').value = githubConfig.productsPath || 'content/products';
            
            // Load admin password
            const savedPassword = localStorage.getItem('admin_password') || ADMIN_PASSWORD;
            document.getElementById('adminPassword').value = savedPassword;
            
            // Load WhatsApp number
            const whatsappNumber = localStorage.getItem('whatsapp_number') || '917876555055';
            document.getElementById('whatsappNumber').value = whatsappNumber;
        }
        
        function saveSettings() {
            // Save GitHub settings
            githubConfig = {
                token: document.getElementById('githubToken').value.trim(),
                username: document.getElementById('githubUsername').value.trim(),
                repo: document.getElementById('githubRepo').value.trim(),
                branch: document.getElementById('githubBranch').value.trim(),
                productsPath: document.getElementById('productsPath').value.trim()
            };
            
            localStorage.setItem('github_config', JSON.stringify(githubConfig));
            
            showNotification('GitHub settings saved successfully!', 'success');
            addSyncLog('GitHub settings updated', 'info');
        }
        
        function saveWebsiteSettings() {
            // Save admin password
            const newPassword = document.getElementById('adminPassword').value.trim();
            if (newPassword) {
                localStorage.setItem('admin_password', newPassword);
            }
            
            // Save WhatsApp number
            const whatsappNumber = document.getElementById('whatsappNumber').value.trim();
            if (whatsappNumber) {
                localStorage.setItem('whatsapp_number', whatsappNumber);
            }
            
            showNotification('Website settings saved successfully!', 'success');
        }
        
        // ===== UTILITY FUNCTIONS =====
        function showMessage(element, text, type) {
            element.textContent = text;
            element.className = `message ${type}`;
            element.style.display = 'block';
            
            setTimeout(() => {
                element.style.display = 'none';
            }, 5000);
        }
        
        function showNotification(text, type = 'info') {
            const notification = document.getElementById('notification');
            const icon = type === 'success' ? 'fa-check-circle' : 
                        type === 'error' ? 'fa-exclamation-circle' : 
                        'fa-info-circle';
            
            notification.innerHTML = `
                <div class="notification-icon" style="color: ${type === 'success' ? 'var(--success)' : type === 'error' ? 'var(--danger)' : 'var(--accent)'};">
                    <i class="fas ${icon}"></i>
                </div>
                <div class="notification-content">
                    <div class="notification-title">${type.charAt(0).toUpperCase() + type.slice(1)}</div>
                    <div class="notification-message">${text}</div>
                </div>
            `;
            
            notification.className = `notification ${type} show`;
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 4000);
        }
        
        function confirmAction(action, message, callback) {
            document.getElementById('modalTitle').textContent = 'Confirm Action';
            document.getElementById('modalBody').textContent = message;
            pendingAction = { action, callback };
            document.getElementById('confirmationModal').classList.add('active');
        }
        
        function executeConfirmedAction() {
            if (pendingAction && pendingAction.callback) {
                pendingAction.callback();
            }
            closeModal();
        }
        
        function closeModal() {
            document.getElementById('confirmationModal').classList.remove('active');
            pendingAction = null;
        }
        
        function updateStats() {
            document.getElementById('totalProducts').textContent = products.length;
            const activeProducts = products.filter(p => p.status === 'active').length;
            document.getElementById('activeProducts').textContent = activeProducts;
            
            // Calculate storage used (approximate)
            const storageUsed = JSON.stringify(products).length / 1024;
            document.getElementById('storageUsed').textContent = storageUsed.toFixed(1) + ' KB';
            
            // Update last sync
            updateSyncStatus();
        }
        
        function loadRecentActivity() {
            const activityContainer = document.getElementById('recentActivity');
            
            if (products.length === 0) {
                activityContainer.innerHTML = `
                    <div style="text-align: center; color: var(--text-muted); padding: 30px;">
                        <i class="fas fa-history" style="font-size: 2.5rem; margin-bottom: 15px; opacity: 0.5; display: block;"></i>
                        <div>No recent activity</div>
                    </div>
                `;
                return;
            }
            
            // Sort products by update time
            const recentProducts = [...products]
                .sort((a, b) => new Date(b.updatedAt || b.createdAt) - new Date(a.updatedAt || a.createdAt))
                .slice(0, 5);
            
            let html = '<div style="display: flex; flex-direction: column; gap: 15px;">';
            
            recentProducts.forEach(product => {
                const time = formatTimeAgo(new Date(product.updatedAt || product.createdAt));
                html += `
                    <div style="display: flex; align-items: center; gap: 15px; padding: 15px; background: rgba(255,255,255,0.03); border-radius: var(--radius-sm);">
                        <div style="width: 40px; height: 40px; border-radius: 50%; background: rgba(53,208,255,0.1); display: flex; align-items: center; justify-content: center; color: var(--accent);">
                            <i class="fas fa-box"></i>
                        </div>
                        <div style="flex: 1;">
                            <div style="font-weight: 500; margin-bottom: 5px;">${product.name}</div>
                            <div style="font-size: 0.85rem; color: var(--text-muted);">Updated ${time}</div>
                        </div>
                        <div style="padding: 5px 12px; border-radius: 20px; font-size: 0.8rem; background: ${product.status === 'active' ? 'rgba(69,255,144,0.1)' : 'rgba(255,177,69,0.1)'}; color: ${product.status === 'active' ? 'var(--success)' : 'var(--warning)'};">
                            ${product.status === 'active' ? 'Active' : 'Draft'}
                        </div>
                    </div>
                `;
            });
            
            html += '</div>';
            activityContainer.innerHTML = html;
        }
        
        function formatTimeAgo(date) {
            const now = new Date();
            const diffMs = now - date;
            const diffMins = Math.floor(diffMs / 60000);
            const diffHours = Math.floor(diffMs / 3600000);
            const diffDays = Math.floor(diffMs / 86400000);
            
            if (diffMins < 1) return 'just now';
            if (diffMins < 60) return `${diffMins}m ago`;
            if (diffHours < 24) return `${diffHours}h ago`;
            if (diffDays < 7) return `${diffDays}d ago`;
            return date.toLocaleDateString();
        }
        
        // ===== DANGER ZONE FUNCTIONS =====
        function clearLocalStorage() {
            localStorage.clear();
            products = [];
            githubConfig = {};
            showNotification('All local data cleared successfully', 'success');
            loadDashboard();
            showTab('dashboard');
        }
        
        function resetSettings() {
            localStorage.removeItem('github_config');
            localStorage.removeItem('admin_password');
            localStorage.removeItem('whatsapp_number');
            initGitHubConfig();
            loadSettingsForm();
            showNotification('Settings reset to default', 'success');
        }
        
        async function deleteAllProducts() {
            try {
                showNotification('Deleting all products...', 'warning');
                
                // Delete from GitHub
                if (githubConfig.token && githubConfig.token !== 'YOUR_GITHUB_PERSONAL_ACCESS_TOKEN') {
                    for (const product of products) {
                        await deleteProductFromGitHub(product.id);
                    }
                }
                
                // Clear local products
                products = [];
                localStorage.removeItem('extra_miles_products');
                
                // Update UI
                loadProductsList();
                updateStats();
                
                showNotification('All products deleted successfully', 'success');
                
            } catch (error) {
                console.error('Error deleting products:', error);
                showNotification('Error deleting products: ' + error.message, 'error');
            }
        }
        
        // ===== EVENT LISTENERS =====
        window.addEventListener('click', function(event) {
            // Close modals when clicking outside
            const modal = document.getElementById('confirmationModal');
            if (event.target === modal) {
                closeModal();
            }
        });
        
        // Close modal on Escape key
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                closeModal();
            }
        });
        
        // Auto-focus password field on login page
        document.getElementById('password')?.addEventListener('focus', function() {
            document.getElementById('loginMessage').style.display = 'none';
        });
        
        // Initialize on load
        console.log('Admin Panel loaded successfully');
        console.log('Default password: Sky12345');
        console.log('Configure GitHub token in Settings tab for automatic sync');
    </script>
</body>
</html>
